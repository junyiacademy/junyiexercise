<!DOCTYPE html>
<html data-require="math math-format graphie graphie-helpers">
    <head>
    	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>帶分數與假分數的轉換</title>
        <script src="../khan-exercise.js"></script>
    </head>
    <body>
        <div class="exercise">

            <div class="problems">
                <div id="improper-to-mixed">
                	<div class="vars" data-ensure="M_NUM &lt; M_DENOM">
		                <var id="WHOLE">randRange( 1, 10 )</var>

		                <var id="M_NUM">randRange( 1, 30 )</var>
		                <var id="M_DENOM">randRange( 1, 30 )</var>

		                <var id="M_REDUCED_NUM">M_NUM / getGCD( M_NUM, M_DENOM )</var>
		                <var id="M_REDUCED_DENOM">M_DENOM / getGCD( M_NUM, M_DENOM )</var>

		                <var id="I_NUM">WHOLE * M_REDUCED_DENOM + M_REDUCED_NUM</var>
		                <var id="I_DENOM">M_REDUCED_DENOM</var>
		            </div>

                    <p class="question">把 <code><var>fraction( I_NUM, I_DENOM, false, true )</var></code> 轉換成帶分數表示。</p>

                    <p class="solution" data-fraction-input="true"  data-type="mixed"><var>I_NUM / I_DENOM</var></p>

                    <div class="hints">
                        <div>
                            <p>首先，分子除以分母。</p>
                            <p><code><var>I_NUM</var> \div <var>I_DENOM</var> = \color{#28AE7B}{<var>WHOLE</var>}\ \text{ 餘 } \color{purple}{<var>M_REDUCED_NUM</var>}</code></p>
                        </div>
                        <div>
                            <p>所以假分數有 <code class="hint_green"><var>WHOLE</var></code> 個整數，等同於 <code>\color{#28AE7B}{<var>WHOLE</var>} \times \dfrac{<var>I_DENOM</var>}{<var>I_DENOM</var>} = \color{#28AE7B}{<var>fraction( I_DENOM * WHOLE, I_DENOM, false, false )</var>}</code>。</p>
                            <div class="graphie">
                                init({ range: [ [0, 1], [0, WHOLE] ], scale: [250, 25] });

                                for ( var y = 0; y &lt; WHOLE; y++ ) {
                                    rectchart( [M_REDUCED_DENOM, 0], ["#28AE7B", "#999"], y );
                                }
                            </div>
                            <p>得到的商數 <code class="hint_green"><var>WHOLE</var></code> 為帶分數的整數部分。</p>
                        </div>
                        <div>
                            <p>我們還得到餘數 <code class="hint_purple"><var>M_REDUCED_NUM</var></code>。這是 <code>\dfrac{\color{purple}{<var>M_REDUCED_NUM</var>}}{<var>I_DENOM</var>}</code> 剩餘的部分；還不夠成為另一個整數。</p>
                            <div class="graphie">
                                init({ range: [ [0, 1], [0, 1] ], scale: [250, 25] });

                                rectchart( [M_REDUCED_NUM, M_REDUCED_DENOM - M_REDUCED_NUM], ["purple", "#999"] );
                            </div>
                        </div>
                        <div>
                            <p>轉換後的帶分數為 <code>\color{#28AE7B}{<var>WHOLE</var>}\ \color{purple}{<var>fraction( M_NUM, M_DENOM, false, true )</var>}。</code></p>
                            <div class="graphie">
                                init({ range: [ [0, 1], [0, WHOLE + 1] ], scale: [250, 25] });

                                for ( var y = 1; y &lt;= WHOLE; y++ ) {
                                    rectchart( [M_REDUCED_DENOM, 0], ["#28AE7B", "#999"], y );
                                }

                                rectchart( [M_REDUCED_NUM, M_REDUCED_DENOM - M_REDUCED_NUM], ["purple", "#999"] );
                            </div>
                        </div>
                        <p>注意如果我們把帶分數的兩個部分相加， <code>\color{#28AE7B}{<var>fraction( I_DENOM * WHOLE, I_DENOM, false, false )</var>} + \color{purple}{<var>fraction( M_NUM, M_DENOM, false, true )</var>}</code>，我們可以得到原本的假分數 <code><var>fraction( I_NUM, I_DENOM, false, true )</var></code>。</p>
                    </div>
                </div>

                <div id="mixed-to-improper">
                	<div class="vars" data-ensure="M_NUM &lt; M_DENOM">
		                <var id="WHOLE">randRange( 1, 10 )</var>

		                <var id="M_NUM">randRange( 1, 30 )</var>
		                <var id="M_DENOM">randRange( 1, 30 )</var>

		                <var id="M_REDUCED_NUM">M_NUM / getGCD( M_NUM, M_DENOM )</var>
		                <var id="M_REDUCED_DENOM">M_DENOM / getGCD( M_NUM, M_DENOM )</var>

		                <var id="I_NUM">WHOLE * M_REDUCED_DENOM + M_REDUCED_NUM</var>
		                <var id="I_DENOM">M_REDUCED_DENOM</var>
		            </div>

                    <p class="question">把 <code><var>WHOLE</var>\ <var>fraction( M_NUM, M_DENOM, false, true )</var></code> 轉換成假分數表示。</p>

                    <p class="solution" data-fraction-input="true"  data-type="improper"><var>I_NUM / I_DENOM</var></p>

                    <div class="hints">
                        <p><code>\color{#FFA500}{<var>WHOLE</var>}\ \color{#6495ED}{<var>fraction( M_NUM, M_DENOM, false, true )</var>}</code></p>
                        <p>帶分數等於 <code>\color{#FFA500}{<var>WHOLE</var>} + \color{#6495ED}{<var>fraction( M_NUM, M_DENOM, false, true )</var>}</code>。</p>
                        <div>
                            <p>首先，轉換帶分數的 <span class="hint_orange">整數部分</span> 成為與 <span class="hint_blue">分數部分</span> 同樣的分母 <code><var>M_REDUCED_DENOM</var></code>。</p>
                            <p><code>\color{#FFA500}{<var>WHOLE</var>} \times \dfrac{<var>M_REDUCED_DENOM</var>}{<var>M_REDUCED_DENOM</var>} = \color{#FFA500}{\dfrac{<var>WHOLE * M_REDUCED_DENOM</var>}{<var>M_REDUCED_DENOM</var>}}</code></p>
                            <div class="graphie">
                                init({ range: [ [0, 1], [0, WHOLE] ], scale: [250, 25] });

                                for ( var y = 0; y &lt; WHOLE; y++ ) {
                                    rectchart( [M_REDUCED_DENOM, 0], ["#FFA500", "#999"], y );
                                }
                            </div>
                        </div>
                        <div>
                            <p>所以現在我們數字的形式為 <code>\color{#FFA500}{\dfrac{<var>WHOLE * M_REDUCED_DENOM</var>}{<var>M_REDUCED_DENOM</var>}} + \color{#6495ED}{<var>fraction( M_NUM, M_DENOM, false, true )</var>}</code>。</p>
                            <div class="graphie">
                                init({ range: [ [0, 1], [0, WHOLE + 1] ], scale: [250, 25] });

                                for ( var y = 1; y &lt;= WHOLE; y++ ) {
                                    rectchart( [M_REDUCED_DENOM, 0], ["#FFA500", "#999"], y );
                                }

                                rectchart( [M_REDUCED_NUM, M_REDUCED_DENOM - M_REDUCED_NUM], ["#6495ED", "#999"] );
                            </div>
                            <p>現在，只要把兩個假分數相加然後化簡！</p>
                        </div>
                        <p><code>\color{#FFA500}{\dfrac{<var>WHOLE * M_REDUCED_DENOM</var>}{<var>M_REDUCED_DENOM</var>}} + \color{#6495ED}{<var>fraction( M_NUM, M_DENOM, false, true )</var>} = <var>fraction( I_NUM, I_DENOM, true, true )</var></code></p>
                    </div>
                </div>

                <div id="case3">
                	<div class="vars" data-ensure=" !isInt( _NUME / _DENO ) ">
                		<var id="_DENO"> randRange( 4, 10 ) </var>
                		<var id="_NUME"> randRange( _DENO + 1, 4 * _DENO - 1 ) </var>
                		<var id="N"> floorTo( 0, _NUME / _DENO ) </var>
                		<var id="M"> _NUME % _DENO </var>
                		<var id="C">(function(){
                			var arr = [ [ -3, 3 ], [ 3, 3 ], [ -3, -3 ], [ 3, -3 ] ];
                			arr.splice( N + 1, 3 - N );
                			return arr;
                		})()</var>
                	</div>

                	<div class="question">
                		<p class="question">如圖，如何用假分數與帶分數表示下列圖形？</p>
                		<div>
                			<div>
                				<table border="0" cellpadding="0" cellspacing="0">
                					<tbody>
                						<tr>
                							<td rowspan="3" style="vertical-align:middle">
                								假分數表示為：
                							</td>
                							<td>
                								<input id="num1" type="text" tabindex="13" style="width:35px;">
                							</td>
                						</tr>
                						<tr>
                							<td>
                								<hr style="margin-top:6px;margin-bottom:6px;border-color:black;border-width:2px">
                							</td>
                						</tr>
                						<tr>
                							<td>
                								<input id="denom1" type="text" tabindex="12" style="width:35px">
                							</td>
                						</tr>
                					</tbody>
                				</table>
                			</div>
                		</div>
                		<div>
                			<div>
                				<table border="0" cellpadding="0" cellspacing="0">
                					<tbody>
                						<tr>
                							<td rowspan="3" style="vertical-align:middle">
                								帶分數表示為：<input id="signed_int" type="text" tabindex="11" style="width:35px;position:relative;left:-3px;">
                							</td>
                							<td>
                								<input id="num2" type="text" tabindex="13" style="width:35px;">
                							</td>
                						</tr>
                						<tr>
                							<td>
                								<hr style="margin-top:6px;margin-bottom:6px;border-color:black;border-width:2px">
                							</td>
                						</tr>
                						<tr>
                							<td>
                								<input id="denom2" type="text" tabindex="12" style="width:35px">
                							</td>
                						</tr>
                					</tbody>
                				</table>
                			</div>
                		</div>
                	</div>

                	<div class="problem">
                		<div class="graphie" id="case3-graphie">
                			init( { range: [ [ -6, 6 ], [ C.length &gt; 2 ? -6 : 0, 6 ] ], scale: 30 } );

                			var averageAng = 360 / _DENO;
                			for( var i = 0; i &lt; C.length - 1; i++ ) {
                				circle( C[ i ], 2.5, { stroke : BLUE, opacity : 0.35, fill : BLUE } );
                				circle( C[ i ], 2.5, { stroke : BLUE } );

                				var startAng = KhanUtil.randRange( 0, 360 );
                				for( var j = 0; j &lt; _DENO; j++ ) {
                					var onlpoint = polar( 2.5, startAng + j * averageAng );
                					line( C[ i ], [ onlpoint[ 0 ] + C[ i ][ 0 ], onlpoint[ 1 ] + C[ i ][ 1 ] ], { stroke : BLUE } );
                				}
                			}

                			var lstag = KhanUtil.randRange( 0, 360 );
                			circle( C[ N ], 2.5, { stroke : BLUE } );
                			for( var k = 0; k &lt; M + 1; k++ ) {
                				arc( C[ N ], 2.5, lstag + ( ( k == 0 ? 1 : k ) - 1 ) * averageAng, lstag + k * averageAng, true, { stroke: BLUE, fill: BLUE, "fill-opacity": 0.35 } );
                			}
                			for( var l = 0; l &lt; _DENO; l++ ) {
                				var onlpoint = polar( 2.5, lstag + l * averageAng );
                				line( C[ N ], [ onlpoint[ 0 ] + C[ i ][ 0 ], onlpoint[ 1 ] + C[ i ][ 1 ] ], { stroke : BLUE } );
                			}
                		</div>
                	</div>

                	<div class="solution" data-type="multiple">
						<div class="sol" data-type="custom">
							<div class="guess">[ $('#num1').val().replace(/[ ]/g,""), $('#denom1').val().replace(/[ ]/g,""), $('#signed_int').val().replace(/[ ]/g,""), $('#num2').val().replace(/[ ]/g,""), $('#denom2').val().replace(/[ ]/g,"") ]</div>
							<div class="validator-function">
								for( var h = 0; h &lt; guess.length; h++ ) {
									if( guess[ h ] == "" ) {
										return "你有些題目還沒有回答喔！";
									}
								}
								return guess[ 0 ] == _NUME &amp;&amp; guess[ 1 ] == _DENO &amp;&amp; guess[ 2 ] == N &amp;&amp; guess[ 3 ] == M &amp;&amp; guess[ 4 ] == _DENO;
							</div>
						</div>
						<p class="example">整數，例：<code>6</code></p>
					</div>

                	<div class="hints">
                		<p>假分數就是分子比分母大的分數，而帶分數就是一個整數加上一個真分數。要寫出假分數以及帶分數，我們要先看這個圖形被分割成幾等份。</p>
                		<p>數一數可以知道，這個圖形分割成 <code><var>_DENO</var></code> 等份，因此分母就是 <code><var>_DENO</var></code>。我們先來找假分數，假分數的分子可以怎麼找呢？</p>
                		<p>分子就是我們拿了幾份，這個圖形共有 <code><var>_NUME</var></code> 個等份，所以假分數的分子就是 <code><var>_NUME</var></code> 。因此假分數的表示法為 <code class="hint_pink">\dfrac{<var>_NUME</var>}{<var>_DENO</var>}</code> 。</p>
                		<p>帶分數分為整數與真分數部分，整數部分就是有幾個完整的圓，從這個圖形我們知道有 <code><var>N</var></code> 個完整的圓，因此整數部分為 <code><var>N</var></code>。接下來求真分數的部分，真分數就是剩下來的不完整的圓，剛剛我們知道分母是 <code><var>_DENO</var></code>，那分子怎麼求呢？</p>
                		<p>剩下來的不完整的圓塗色部分我們拿了 <code><var>M</var></code> 等份，所以分子是 <code><var>M</var></code>，因此帶分數的表示法為 <code class="hint_pink"><var>N</var>\dfrac{<var>M</var>}{<var>_DENO</var>}</code> 。也就是說 <code class="hint_green">\dfrac{<var>_NUME</var>}{<var>_DENO</var>} = <var>N</var>\dfrac{<var>M</var>}{<var>_DENO</var>}</code> 。</p>
                	</div>

                </div>

                <div id="case4">
                	<div class="vars">
                		<var id="_DENO"> randRange( 4, 10 ) </var>
                		<var id="_NUME"> randRange( 1, 4 ) * _DENO </var>
                		<var id="N"> roundTo( 0, _NUME / _DENO ) </var>
                		<var id="C">(function(){
                			var arr = [ [ -3, 3 ], [ 3, 3 ], [ -3, -3 ], [ 3, -3 ] ];
                			arr.splice( N, 4 - N );
                			return arr;
                		})()</var>
                	</div>

                	<div class="question">
                		<p class="question">請將 <code>\dfrac{<var>_NUME</var>}{<var>_DENO</var>}</code> 化成整數或帶分數表示。</p>
                	</div>

                	<p class="solution" data-fraction-input="true"  data-type="mixed"><var>N</var></p>

                	<div class="hints">
                		<div>
                			<p>我們可以畫一個圖來幫助我們觀察，因為分母為 <code><var>_DENO</var></code> ，因此我們畫一個 <code><var>_DENO</var></code> 等份的圓。</p>
                			<div class="graphie" id="case4-graphie">
	                			init( { range: [ [ -6, 6 ], [ 0, 6 ] ], scale: 30 } );

	                			var averageAng = 360 / _DENO;
	                			for( var i = 0; i &lt; 1; i++ ) {
	                				circle( C[ i ], 2.5, { stroke : BLUE, opacity : 0.35, fill : BLUE } );
	                				circle( C[ i ], 2.5, { stroke : BLUE } );

	                				var startAng = KhanUtil.randRange( 0, 360 );
	                				for( var j = 0; j &lt; _DENO; j++ ) {
	                					var onlpoint = polar( 2.5, startAng + j * averageAng );
	                					line( C[ i ], [ onlpoint[ 0 ] + C[ i ][ 0 ], onlpoint[ 1 ] + C[ i ][ 1 ] ], { stroke : BLUE } );
	                				}
	                			}
	                		</div>
                		</div>
                		<div>
                			<p>因為分子為 <code><var>_NUME</var></code> ，代表我們拿了 <code><var>_NUME</var></code> 等份，因此我們可以在圓上的 <code><var>_NUME</var></code> 個等份畫上顏色。如果不夠畫，就要再多畫圓。</p>
                			<div class="graphie" data-update="case4-graphie">
                				init( { range: [ [ -6, 6 ], [ C.length &gt; 2 ? -6 : 0, 6 ] ], scale: 30 } );
                				var averageAng = 360 / _DENO;
                				for( var i = 1; i &lt; C.length; i++ ) {
	                				circle( C[ i ], 2.5, { stroke : BLUE, opacity : 0.35, fill : BLUE } );
	                				circle( C[ i ], 2.5, { stroke : BLUE } );

	                				var startAng = KhanUtil.randRange( 0, 360 );
	                				for( var j = 0; j &lt; _DENO; j++ ) {
	                					var onlpoint = polar( 2.5, startAng + j * averageAng );
	                					line( C[ i ], [ onlpoint[ 0 ] + C[ i ][ 0 ], onlpoint[ 1 ] + C[ i ][ 1 ] ], { stroke : BLUE } );
	                				}
	                			}
                			</div>
                		</div>
                		<p>我們發現剛好畫滿 <code><var>N</var></code> 個完整的圓，因此整數部分表示為 <code><var>N</var></code>。也就是說 <code>\dfrac{<var>_NUME</var>}{<var>_DENO</var>}=\color{#FF00AF}{<var>N</var>}</code> 。</p>
                	</div>

                </div>

            </div>
        </div>
    </body>
</html>
