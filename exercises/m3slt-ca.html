<!DOCTYPE html>
<html data-require="math graphie graphie-3d math-format interactive">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>正方體的表面積</title>
    <script src="../khan-exercise.js"></script>
    <script type="text/javascript">
        var normalize = function(vect) {
            var length = Math.sqrt(vect[0] * vect[0] +
                                   vect[1] * vect[1] +
                                   vect[2] * vect[2]);
            return _.map(vect, function(e) { return e / length; });
        };
    </script>
</head>
<body>
<div class="exercise">
	<div class="vars">
		<var id="COLOR1">"#D7ED3A"</var>
		<var id="COLOR2">"#38C77F"</var>
		<var id="COLOR3">"#78D0EF"</var>
		<var id="COLOR4">"#F0B63A"</var>
		<var id="LENGTH">randRange(2, 10)</var>
		<var id="WIDTH">LENGTH</var>
		<var id="HEIGHT">LENGTH</var>
		<var id="MAX">LENGTH</var>
		<var id="YANGLE">-PI / 8</var>
		<var id="XANGLE">0</var>
	</div>

    <p class="question">計算下面正方體的表面積。(下圖單位：公分)</p>

    <div class="problem">
        <div class="graphie">
            init({range: [[-2, 2], [-2, 2]], scale: [100, 100]});
            addMouseLayer();

            graph.obj = make3dObject(VERTICES, { scale: SCALE });
            _.each(FACES, function(face) {
                graph.obj.addFace(face);
            });

            graph.obj.setPos([0, 0, 5]);

            graph.obj.rotate(1, 0, 0, YANGLE);
            graph.obj.rotate(0, 1, 0, XANGLE);

            graph.obj.doDraw();

            GRAPH = graph;

            var spinner;
            setTimeout(function() {
                spinner = setInterval(function() {
                    GRAPH.obj.rotate(0, 1, 0, 0.01);
                    GRAPH.obj.doDraw();
                }, 50);
            }, 300);

            var mouseTarget = mouselayer.rect(0, 0, 400, 400).attr({
                fill: "#000", opacity: 0.0
            });
            $(mouseTarget[0]).bind("vmousedown", function(event) {
                GRAPH.lastX = event.pageX;
                GRAPH.lastY = event.pageY;

                clearInterval(spinner);

                $(document).bind("vmousemove vmouseup", function(event) {
                    event.preventDefault();

                    var dx = (event.pageX - GRAPH.lastX) / 200 * PI;
                    var dy = (event.pageY - GRAPH.lastY) / 200 * PI;

                    GRAPH.lastX = event.pageX;
                    GRAPH.lastY = event.pageY;

                    var xAxis = normalize(GRAPH.obj.perspective[1]);
                    var yAxis = normalize(GRAPH.obj.perspective[0]);

                    GRAPH.obj.rotate(xAxis[0], xAxis[1], xAxis[2], -dx / 2);
                    GRAPH.obj.rotate(yAxis[0], yAxis[1], yAxis[2], -dy / 2);

                    GRAPH.obj.doDraw();

                    if (event.type === "vmouseup") {
                        $(document).unbind("vmousemove vmouseup");
                    }
                })
            });

        </div>
    </div>

    <div class="problems">
        <div id="case1">
            <div class="vars">
                <var id="VERTICES">[
                    [LENGTH/MAX, WIDTH/MAX, HEIGHT/MAX],
                    [LENGTH/MAX, WIDTH/MAX, -HEIGHT/MAX],
                    [LENGTH/MAX, -WIDTH/MAX, -HEIGHT/MAX],
                    [LENGTH/MAX, -WIDTH/MAX, HEIGHT/MAX],
                    [-LENGTH/MAX, WIDTH/MAX, HEIGHT/MAX],
                    [-LENGTH/MAX, WIDTH/MAX, -HEIGHT/MAX],
                    [-LENGTH/MAX, -WIDTH/MAX, -HEIGHT/MAX],
                    [-LENGTH/MAX, -WIDTH/MAX, HEIGHT/MAX]
                ]</var>
                <var id="SCALE">4.0</var>
                <var id="FACES">[
                    {
                        verts: [3, 2, 1, 0],
                        color: COLOR1,
                        labels: [[[1, 0, 1], WIDTH]]
                    }, {
                        verts: [4, 5, 6, 7],
                        color: COLOR1,
                        labels: [[[-1, 0, -1], WIDTH]]
                    }, {
                        verts: [0, 1, 5, 4],
                        color: COLOR3,
                        labels: [[[-1, 1, 0], HEIGHT]]
                    }, {
                        verts: [2, 3, 7, 6],
                        color: COLOR3,
                        labels: [[[-1, -1, 0], HEIGHT]]
                    }, {
                        verts: [1, 2, 6, 5],
                        color: COLOR2,
                        labels: [[[0, -1, -1], LENGTH]]
                    }, {
                        verts: [3, 0, 4, 7],
                        color: COLOR2,
                        labels: [[[0, 1, 1], LENGTH]]
                    }
                ]</var>
            </div>

            <div class="solution" data-type="multiple">
                <span class="sol" data-forms="integer"><var>LENGTH * LENGTH * 6</var></span>平方公分
            </div>

            <div class="hints">
                <div>
                    <p>正方體的表面積為 <code class="hint_blue">邊長 \times 邊長 \times 6</code> 平方公分。</p>
                    <p>透過這張圖，我們可以發現邊長是 <code><var>LENGTH</var></code> 公分。</p>
                </div>
                <div>
                    <p>所以，這個正方體的表面積為 </p>
                    <p><code>\qquad<var>LENGTH</var> \times <var>LENGTH</var> \times 6 = \color{#FF00AF}{<var>LENGTH * LENGTH * 6</var>}</code> 平方公分</p>
                </div>
            </div>
        </div>

        <div id="case2">
            <div class="vars">
                <var id="LENGTH">randRange(3, 9)</var>
                <var id="VERTICES">[
                    [LENGTH/MAX, WIDTH/MAX, HEIGHT/MAX],
                    [LENGTH/MAX, WIDTH/MAX, -HEIGHT/MAX],
                    [LENGTH/MAX, -WIDTH/MAX, -HEIGHT/MAX],
                    [LENGTH/MAX, -WIDTH/MAX, HEIGHT/MAX],
                    [-LENGTH/MAX, WIDTH/MAX, HEIGHT/MAX],
                    [-LENGTH/MAX, WIDTH/MAX, -HEIGHT/MAX],
                    [-LENGTH/MAX, -WIDTH/MAX, -HEIGHT/MAX],
                    [-LENGTH/MAX, -WIDTH/MAX, HEIGHT/MAX]
                ]</var>
                <var id="SCALE">4.0</var>
                <var id="FACES">[
                    {
                        verts: [3, 2, 1, 0],
                        color: COLOR1
                    }, {
                        verts: [4, 5, 6, 7],
                        color: COLOR1
                    }, {
                        verts: [0, 1, 5, 4],
                        color: COLOR3
                    }, {
                        verts: [2, 3, 7, 6],
                        color: COLOR3
                    }, {
                        verts: [1, 2, 6, 5],
                        color: COLOR2
                    }, {
                        verts: [3, 0, 4, 7],
                        color: COLOR2
                    }
                ]</var>
            </div>

            <p class="question">正方體其中一面面積為 <code><var>LENGTH * LENGTH</var></code> 平方公分，請問它的表面積為何？</p>

            <div class="solution" data-type="multiple">
                <span class="sol" data-forms="integer"><var>LENGTH * LENGTH * 6</var></span>平方公分
            </div>

            <div class="hints">
                <p>正方體有 <code>6</code> 個面，每個面面積一樣大。</p>
                <p>因此正方體的表面積為 <code><var>LENGTH * LENGTH</var> \times 6 = \color{#FF00AF}{<var>LENGTH * LENGTH * 6</var>}</code> 平方公分。</p>
            </div>
        </div>

        <div id="case3">
            <div class="vars">
                <var id="LENGTH">randRange(3, 9)</var>
                <var id="_FACES">LENGTH * LENGTH * 6</var>
            </div>

            <p class="question">正方體的表面積為 <code><var>_FACES</var></code> 平方公分，請問其中一面的面積為多少平方公分？</p>
            <div class="problem"></div>

            <div class="solution" data-type="multiple">
                <span class="sol" data-forms="integer"><var>LENGTH * LENGTH</var></span>平方公分
            </div>

            <div class="hints">
                <p>正方體有 <code>6</code> 個面，每個面面積一樣大。</p>
                <div>
                    <p>因此正方體其中一面的表面積為 </p>
                    <p><code>\qquad<var>_FACES</var> \div 6 = \color{#FF00AF}{<var>LENGTH * LENGTH</var>}</code> 平方公分</p>
                </div>
            </div>
        </div>

    </div>
</div>
</body>
</html>
