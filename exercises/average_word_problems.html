<!DOCTYPE html>
<html data-require="math word-problems">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Average word problems</title>
    <script src="../khan-exercise.js"></script>
</head>
<body>
    <div class="exercise">
    <div class="problems">
        <div>
            <div class="vars" data-ensure="elem_SUM % LENGTH === 0">
                <var id="LENGTH">randRange(4, 6)</var>
                <var id="SCORES">randRange(75, 98, LENGTH)</var>
                <var id="elem_SUM">(function() {
                    var s_sum = 0;

                    $.each(SCORES, function( i, elem ) {
                        s_sum += elem;
                    });

                    return s_sum;
                })()</var>
            </div>

            <div class="question">
                <p><var>person(1)</var>上的<var>course(1)</var>課共有<var>LENGTH</var>次<var>plural(exam(1))</var>。<var>His(1)</var>分數分別是<var>toSentence(SCORES)</var>。</p>

                <p>請問全部的<var>plural(exam(1))</var>平均是幾分?</p>
            </div>
            <div class="solution"><var>elem_SUM / LENGTH</var></div>

            <div class="hints">
                <p>平均幾分的算法是<var>his(1)</var>所有考試分數總和除以考試的次數。</p>
                <p>總共有<var>LENGTH</var>個測驗，全部的分數總合為<code><var>SCORES.join(" + ")</var> = <var>elem_SUM</var></code>。</p>
                <p><var>His(1)</var>平均分數為<code><var>elem_SUM</var> \div <var>LENGTH</var> = <var>elem_SUM / LENGTH</var></code>。</p>
            </div>
        </div>

        <div>
            <div class="vars" data-ensure="NEW_AVG + COUNT * (NEW_AVG - OLD_AVG) <= 100">
                <var id="COUNT">randRange(3, 7)</var>
                <var id="OLD_AVG">randRange(77, 88)</var>
                <var id="NEW_AVG">randRange(OLD_AVG + 2, 99)</var>
            </div>

            <div class="question">
                <p><var>person(1)</var>在<var>course(1)</var>課的前<var>COUNT</var>次的<var>exam(1)</var>，平均分數為<var>OLD_AVG</var>分。</p>

                <p><var>he(1)</var>下次<var>exam(1)</var>需要考幾分才能讓平均達到<var>NEW_AVG</var>分?</p>
            </div>
            <div class="solution"><var>NEW_AVG + COUNT * (NEW_AVG - OLD_AVG)</var></div>

            <div class="hints">
                <p>設<var>his(1)</var>下一次<var>exam(1)</var>的分數為<code>x</code>分。</p>
                <p><var>his(1)</var>分數總合會變成<code><var>COUNT</var> \cdot <var>OLD_AVG</var> + x</code>。</p>
                <p>分數總合也同時等於<code><var>COUNT + 1</var> \cdot <var>NEW_AVG</var></code>。</p>
                <p>解x:<code>x = <var>COUNT + 1</var> \cdot <var>NEW_AVG</var> - <var>COUNT</var> \cdot <var>OLD_AVG</var> = <var>(COUNT + 1) * NEW_AVG - COUNT * OLD_AVG</var></code>。</p>
            </div>
        </div>

        <div>
            <div class="vars" data-ensure="(OLD_AVG * COUNT + 100 * REMAINING) % (COUNT + REMAINING) === 0">
                <var id="COUNT">randRange(3, 6)</var>
                <var id="REMAINING">randRange(2, COUNT - 2)</var>
                <var id="OLD_AVG">randRange(77, 88)</var>
                <var id="NEW_AVG">(OLD_AVG * COUNT + 100 * REMAINING) / (COUNT + REMAINING)</var>
            </div>

            <div class="question">
                <p><var>person(1)</var>已經考了<var>COUNT</var>次<var>plural(exam(1))</var>，<var>his(1)</var>而這些考試平均起來為<var>OLD_AVG</var>分。</p>

                <p>如果<var>he(1)</var>在最後<var>REMAINING</var>次<var>plural(exam(1))</var>都拿到100分的成績(最好的成績)，那<var>his(1)</var>新的平均會是幾分?</p>
            </div>
            <div class="solution"><var>NEW_AVG</var></div>

            <div class="hints">
                <p>如果<var>he(1)</var>在接下來的<var>plural(exam(1))</var>都拿100分，那<var>his(1)</var>分數總合為<code><var>COUNT</var> \cdot <var>OLD_AVG</var> + <var>REMAINING</var> \cdot <var>100</var> = <var>COUNT * OLD_AVG + 100 * REMAINING</var></code>。</p>
                <p>所以<var>His(1)</var>平均會變成<code><var>COUNT * OLD_AVG + 100 * REMAINING</var> \div <var>COUNT + REMAINING</var> = <var>NEW_AVG</var></code>分。</p>
            </div>
        </div>
    </div>
    </div>
</body>
</html>
