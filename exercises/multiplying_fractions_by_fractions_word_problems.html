<!DOCTYPE html>
<html data-require="math math-format graphie graphie-helpers word-problems">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>分數乘法應用 2</title>
    <script src="../khan-exercise.js"></script>
</head>
<body>
    <div class="exercise">
        <div class="problems">
			<div id="case1">
				<div class="vars">
					<var id="Denominator">randRange(10,13)</var>
					<var id="times">randRange(4,6)</var>
					<var id="name">randFromArray(["小林","東來","佐助"])</var>
					<var id="Numerator">
						(function(){
							var num=0; 
							while(1){
								num=randRange(7,9);
								if((getGCD(Denominator,num)==1) && (getGCD(times,num)==1)){
									return num;
								}
							}
						})()
					</var>
				</div>
				<div class="question">
					<p><var>name</var>去一次最喜歡的餐廳來回總共 <code><var>mixedFractionFromImproper(Denominator,Numerator,true,true,false,false)</var></code> 公里，<var>name</var>上週去了 <code><var>times</var></code> 次餐廳。<var>name</var>上週總共走了多少公里？</p>
					<div class="graphie">
                            init({ range: [ [ 0, 1 ], [ 0,  2 ] ],scale: [ 450, 30 ] });
							rectchart( [Numerator, 0 ], [ "#6495ED", "#ccc" ], 1 );
                            rectchart( [Denominator-Numerator, Numerator*2-Denominator ], [ "#6495ED", "#ccc" ], 0 );
					</div>
				</div>
				<div class="solution" data-type="rational">
					<var>times*Denominator/Numerator</var>
				</div>
				<div class="hints">
					<div><p>讓我們假設這個長方形表示一公里：</p>
					<div class="graphie">
                            init({ range: [ [ 0, 1 ], [ 0,  1 ] ],scale: [ 450, 30 ] });
                            rectchart( [0, 1], [ "#6495ED", "#ccc" ], 0 );
					</div></div>
					<div><p>去餐廳來回要 <code><var>mixedFractionFromImproper(Denominator,Numerator,true,true,false,false)</var></code> 公里，可以將長方形平均分成 <code><var>Numerator</var></code> 個相等的小長方形，每一個小長方形表示 <code>\dfrac{1}{<var>Numerator</var>}</code> 公里。</p>
						<div class="graphie">
							init({ range: [ [ 0, 1 ], [ 0,  1 ] ],scale: [ 450, 30 ] });
							rectchart( [0, Numerator], [ "#6495ED", "#ccc" ], 0 );
					</div></div>
					<div><p>所以，下面的  <code><var>Denominator</var></code> 個小長方形表示 <code><var>mixedFractionFromImproper(Denominator,Numerator,true,true,false,false)</var></code> 公里。（每行表示一公里）</p>
					<div class="graphie">
                            init({ range: [ [ 0, 1 ], [ 0,  2 ] ],scale: [ 450, 30 ] });
							rectchart( [Numerator, 0 ], [ "#6495ED", "#ccc" ], 1 );
                            rectchart( [Denominator-Numerator, Numerator*2-Denominator ], [ "#6495ED", "#fff" ], 0 );
					</div></div>
					<p><var>name</var>上週總共去了 <code><var>times</var></code> 次最喜歡的餐廳，也就是來回一次的距離乘以 <code><var>times</var></code> ，那麼<var>name</var>上週總共走了多少公里？</p>
					<div><p>數一下共有 <code><var>Denominator</var></code> 個小長方形，把這個長方形的數量乘以 <code><var>times</var></code> ，總共得到 <code><var>Denominator*times</var></code> 個小長方形：</p>
					<div class="graphie">
                            init({ range: [ [ 0, 1 ], [ 0,  3*times-1 ] ],scale: [ 450, 30 ] });
							if((3*times-1)&gt;14){
								rectchart( [Numerator, 0 ], [ "#6495ED", "#ccc" ], 16 );
								rectchart( [Denominator-Numerator, Numerator*2-Denominator ], [ "#6495ED", "#fff" ], 15 );
							}
							if((3*times-1)&gt;11){
								rectchart( [Numerator, 0 ], [ "#6495ED", "#ccc" ], 13 );
								rectchart( [Denominator-Numerator, Numerator*2-Denominator ], [ "#6495ED", "#fff" ], 12 );
							}
							rectchart( [Numerator, 0 ], [ "#6495ED", "#ccc" ], 10 );
                            rectchart( [Denominator-Numerator, Numerator*2-Denominator ], [ "#6495ED", "#fff" ], 9 );
							rectchart( [Numerator, 0 ], [ "#6495ED", "#ccc" ], 7 );
                            rectchart( [Denominator-Numerator, Numerator*2-Denominator ], [ "#6495ED", "#fff" ], 6 );
							rectchart( [Numerator, 0 ], [ "#6495ED", "#ccc" ], 4 );
                            rectchart( [Denominator-Numerator, Numerator*2-Denominator ], [ "#6495ED", "#fff" ], 3 );
							rectchart( [Numerator, 0 ], [ "#6495ED", "#ccc" ], 1 );
                            rectchart( [Denominator-Numerator, Numerator*2-Denominator ], [ "#6495ED", "#fff" ], 0 );
					</div></div>
					<div><p>總共有 <code><var>Denominator*times</var></code> 個小長方形，一個小長方形表示 <code>\dfrac{1}{<var>Numerator</var>}</code> 公里。 <code><var>Denominator*times</var></code> 個小長方形就是表示<code>\dfrac{<var>Denominator*times</var>}{<var>Numerator</var>}</code>公里；
					我們把 <code><var>mixedFractionFromImproper(Denominator,Numerator,true,true,false,false)</var></code> 乘以 <code><var>times</var></code> 也可以得到同樣的結果：</p>
					<p><code><var>mixedFractionFromImproper(Denominator,Numerator,true,true,false,false)</var>\times<var>times</var>=\dfrac{<var>Denominator</var>}{<var>Numerator</var>}\times<var>times</var>=\dfrac{<var>Denominator*times</var>}{<var>Numerator</var>}</code></p>
					</div>
					<p><code>\dfrac{<var>Denominator*times</var>}{<var>Numerator</var>}</code> 是多少公里呢？</p>
					<div><p>如何用帶分數來表示 <code>\dfrac{<var>Denominator*times</var>}{<var>Numerator</var>}</code> 呢？我們可以重新排列小長方形：</p>
					<div class="graphie">
						init({ range: [ [ 0, 1 ], [ 0,  parseInt(times*Denominator/Numerator)+1 ] ],scale: [ 450, 30 ] });
						var turn=parseInt(times*Denominator/Numerator);
						while(turn&gt;0){
							rectchart( [Numerator, 0 ], [ "#6495ED", "#ccc" ], turn-- );
						}
						rectchart( [times*Denominator-parseInt(times*Denominator/Numerator)*Numerator, parseInt(times*Denominator/Numerator)*Numerator+Numerator-Denominator*times ], [ "#6495ED", "#fff" ],0);
					</div></div>
					<p>每行表示一公里，那這裡怎麼用帶分數來表示呢？</p>
					<p>一行有 <code><var>Numerator</var></code> 個小長方形的總共有 <code><var>parseInt(times*Denominator/Numerator)</var></code> 行，另外還有 <code><var>Denominator*times-parseInt(times*Denominator/Numerator)*Numerator</var></code> 個小長方形，
					 <code><var>parseInt(times*Denominator/Numerator)</var>\times<var>Numerator</var>=<var>Numerator*parseInt(times*Denominator/Numerator)</var></code> 還剩下 <code><var>Denominator*times-parseInt(times*Denominator/Numerator)*Numerator</var></code> ，我們可以寫成 
					<code>\dfrac{<var>Denominator*times</var>}{<var>Numerator</var>}=<var>mixedFractionFromImproper(Denominator*times,Numerator,true,true,false,false)</var></code> 。</p>
					<p>因此，用帶分數表示為： <code><var>mixedFractionFromImproper(Denominator*times,Numerator,true,true,false,false)</var></code> ，所以<var>name</var>上週總共走了 <code class="hint_pink"><var>mixedFractionFromImproper(Denominator*times,Numerator,true,true,false,false)</var></code> 公里 </p>
				</div>
			</div> 
			
			<div id="case2">
				<div class="vars">
					<var id="total">randFromArray([[6,7],[5,6],[5,7],[5,8]])</var>
					<var id="jeans">randFromArray([[2,5],[3,5],[2,7],[3,7]])</var>
					<var id="name">randFromArray(["小櫻","柯南","小紅"])</var>
					<var id="gac_num">getGCD(total[0]*jeans[0],total[1]*jeans[1])</var>
				</div>
				<div class="question">
					<p>在校期間<var>name</var>花了口袋裡 <code>\dfrac{<var>total[0]</var>}{<var>total[1]</var>}</code> 的錢買衣服和褲子，其中 <code>\dfrac{<var>jeans[0]</var>}{<var>jeans[1]</var>}</code> 的錢買了牛仔褲。</p>
					<p>怎麼用分數來表示<var>name</var>買牛仔褲的錢是原來總錢數的幾分之幾呢？</p>
				</div>
				<div class="solution" data-type="rational">
					<var>(total[0]*jeans[0])/(total[1]*jeans[1])</var>
				</div>
				<div class="hints">
					<p><var>name</var>花了 <code>\dfrac{<var>total[0]</var>}{<var>total[1]</var>}</code> 中的 <code>\dfrac{<var>jeans[0]</var>}{<var>jeans[1]</var>}</code> 錢買牛仔褲，我們可以用 <code>\dfrac{<var>total[0]</var>}{<var>total[1]</var>}</code> 乘以 <code>\dfrac{<var>jeans[0]</var>}{<var>jeans[1]</var>}</code> 來表示。</p>
					<p><code>\dfrac{<var>total[0]</var>}{<var>total[1]</var>}\times\dfrac{<var>jeans[0]</var>}{<var>jeans[1]</var>}=</code>？</p>
					<div><p>兩個分數相乘，我們可以分子與分子相乘，分母與分母相乘：</p>
					<p><code>\dfrac{<var>total[0]</var>}{<var>total[1]</var>}\times\dfrac{<var>jeans[0]</var>}{<var>jeans[1]</var>}=\dfrac{<var>total[0]</var>\times<var>jeans[0]</var>}{<var>total[1]</var>\times<var>jeans[1]</var>}</code></p>
					</div>
					<p><code>\dfrac{<var>total[0]</var>\times<var>jeans[0]</var>}{<var>total[1]</var>\times<var>jeans[1]</var>}=\dfrac{<var>total[0]*jeans[0]</var>}{<var>total[1]*jeans[1]</var>}<span data-if="gac_num!=1">=\dfrac{<var>gac_num</var>\times<var>total[0]*jeans[0]/gac_num</var>}{<var>gac_num</var>\times<var>total[1]*jeans[1]/gac_num</var>}=\dfrac{<var>total[0]*jeans[0]/gac_num</var>}{<var>total[1]*jeans[1]/gac_num</var>}</span></code></p>
					<p><var>name</var>總共花了 <code class="hint_pink"><span data-if="gac_num==1">\dfrac{<var>total[0]*jeans[0]</var>}{<var>total[1]*jeans[1]</var>}</span><span data-if="gac_num!=1">\dfrac{<var>total[0]*jeans[0]/gac_num</var>}{<var>total[1]*jeans[1]/gac_num</var>}</span></code> 的錢買牛仔褲。</p>
				</div>
			</div>
			
			<div id="case3">
				<div class="vars">
					<var id="height">randFromArray([[5,6],[6,7],[5,7]])</var>
					<var id="frac_num">
						(function(){
							var num=new Array(2);
							switch(height[0]){
								case 5:num[0]=height[0]-randRange(1,2);break;
								case 6:num[0]=height[0]-1;break;
							}
							num[1]=height[0];
							return num;
						})()
					</var>					
					<var id="ggcd">getGCD((height[1]*height[0]+height[0])*frac_num[0],frac_num[1]*height[1])</var>
				</div>
				<div class="question">
					<p>一條繩子長 <code><var>mixedFractionFromImproper(height[0]+height[0]*height[1],height[1],true,true,false,false)</var></code> 公尺，<code>\dfrac{<var>frac_num[0]</var>}{<var>frac_num[1]</var>}</code> 條繩子長幾公尺？</p>
					<div class="graphie" id="similar">
						init({
							range: [ [-0.1,3.1], [-0.1,1.5*height[0]+1.6] ],
							scale: 40
						});
						for(var i=0;i&lt;height[0];i++){
							path([[0,i*1.5],[3,i*1.5],[3,1.5+i*1.5],[0,1.5+i*1.5],[0,i*1.5]], {stroke: "black",fill: "#ccc"});
						}
						
						for(var i=0;i&lt;height[1];i++){
							if(i&lt;height[0]){
								path([[0,(i/height[1]+height[0])*1.5],[3,(i/height[1]+height[0])*1.5],[3,((i+1)/height[1]+height[0])*1.5],[0,((i+1)/height[1]+height[0])*1.5],[0,(i/height[1]+height[0])*1.5]], {stroke: "black",fill: "#ccc"});
							}else{
								path([[0,(i/height[1]+height[0])*1.5],[3,(i/height[1]+height[0])*1.5],[3,((i+1)/height[1]+height[0])*1.5],[0,((i+1)/height[1]+height[0])*1.5],[0,(i/height[1]+height[0])*1.5]], {stroke: "black",fill: "white"});
							}
						}
					</div>
				</div>
				<div class="solution" data-type="rational">
					<var>((height[0]*height[1]+height[0])/height[1])*(frac_num[0]/frac_num[1])</var>
				</div>
				<div class="hints">
					<div><p>我們可以用畫圖來幫助我們求出 <code><var>mixedFractionFromImproper(height[0]+height[0]*height[1],height[1],true,true,false,false)</var></code> 公尺的 <code>\dfrac{<var>frac_num[0]</var>}{<var>frac_num[1]</var>}</code> 。</p>
					<div class="graphie" id="similar_2">
						init({
							range: [ [-0.1,5], [-0.1,1.5*height[0]+1.6] ],
							scale: 40
						});
						for(var i=0;i&lt;height[0];i++){
							if(i&lt;frac_num[0]){
								path([[0,i*1.5],[3,i*1.5],[3,1.5+i*1.5],[0,1.5+i*1.5],[0,i*1.5]], {stroke: "black",fill: "#6495ED"});
							}else{
								path([[0,i*1.5],[3,i*1.5],[3,1.5+i*1.5],[0,1.5+i*1.5],[0,i*1.5]], {stroke: "black",fill: "#ccc"});
							}
						}
						for(var i=0;i&lt;height[1];i++){
							if(i&lt;height[0]){
								if(i&lt;frac_num[0]){
										path([[0,(i/height[1]+height[0])*1.5],[3,(i/height[1]+height[0])*1.5],[3,((i+1)/height[1]+height[0])*1.5],[0,((i+1)/height[1]+height[0])*1.5],[0,(i/height[1]+height[0])*1.5]], {stroke: "black",fill: "#28AE7B"});
								}else{
									path([[0,(i/height[1]+height[0])*1.5],[3,(i/height[1]+height[0])*1.5],[3,((i+1)/height[1]+height[0])*1.5],[0,((i+1)/height[1]+height[0])*1.5],[0,(i/height[1]+height[0])*1.5]], {stroke: "black",fill: "#ccc"});
								}
							}else{
								path([[0,(i/height[1]+height[0])*1.5],[3,(i/height[1]+height[0])*1.5],[3,((i+1)/height[1]+height[0])*1.5],[0,((i+1)/height[1]+height[0])*1.5],[0,(i/height[1]+height[0])*1.5]], {stroke: "black",fill: "white"});
							}
						}
						label([3.2,height[0]*1.5+(1.5*frac_num[0]/2)/height[1]], "\\frac{"+frac_num[0]+"}{"+height[1]+"}"+"\\small{公尺}", "right",{color:"#28AE7B"});
						label([3.2,1.5*frac_num[0]/2], "\\small{"+frac_num[0]+"公尺}", "right",{color:"#6495ED"});
					</div>
					<p><code>\dfrac{<var>height[0]</var>}{<var>height[1]</var>}</code> 公尺的 <code>\dfrac{<var>frac_num[0]</var>}{<var>frac_num[1]</var>}</code> 是 <code>\dfrac{<var>frac_num[0]</var>}{<var>height[1]</var>}</code> 公尺，</p>
					<p><code><var>height[0]</var></code> 公尺的 <code>\dfrac{<var>frac_num[0]</var>}{<var>frac_num[1]</var>}</code> 是 <code><var>height[0]*frac_num[0]/frac_num[1]</var></code> 公尺，</p>
					</div>
					<p>所以，長度是 <code><var>frac_num[0]</var>\dfrac{<var>frac_num[0]</var>}{<var>height[1]</var>}</code><span data-if="getGCD(height[1],frac_num[0])!=1">，也就是 <code><var>mixedFractionFromImproper(frac_num[0]*(height[1]+1),height[1],true,true,false,false)</var></code></span> 公尺。</p>
					<p>我們也可以通過乘法來求繩子的長度。</p>
					<div><p><code><var>mixedFractionFromImproper(height[0]+height[0]*height[1],height[1],true,true,false,false)</var></code> 公尺的 <code>\dfrac{<var>frac_num[0]</var>}{<var>frac_num[1]</var>}</code> ，我們可以用 <code><var>mixedFractionFromImproper(height[0]+height[0]*height[1],height[1],true,true,false,false)</var></code> 乘以 <code>\dfrac{<var>frac_num[0]</var>}{<var>frac_num[1]</var>}</code> 來求長度：</p>
					<p><code><var>mixedFractionFromImproper(height[0]+height[0]*height[1],height[1],true,true,false,false)</var>\times\dfrac{<var>frac_num[0]</var>}{<var>frac_num[1]</var>}</code> <code>= ？</code></p>
					</div>
					<div><p>我們可以將 <code><var>mixedFractionFromImproper(height[0]+height[0]*height[1],height[1],true,true,false,false)</var></code> 看成一個分數， <code><var>mixedFractionFromImproper(height[0]+height[0]*height[1],height[1],true,true,false,false)</var></code> 就相當於 <code><var>height[0]</var>+\dfrac{<var>height[0]</var>}{<var>height[1]</var>}</code> ，
					一公尺就相當於 <code>\dfrac{<var>height[1]</var>}{<var>height[1]</var>}</code> ，可以化簡為：</p>
					<p><code><var>height[0]</var>\dfrac{<var>height[0]</var>}{<var>height[1]</var>} = \dfrac{<var>height[1]</var>}{<var>height[1]</var>}+\dfrac{<var>height[1]</var>}{<var>height[1]</var>}+\dfrac{<var>height[1]</var>}{<var>height[1]</var>}+\dfrac{<var>height[1]</var>}{<var>height[1]</var>}+\dfrac{<var>height[1]</var>}{<var>height[1]</var>}
					<span data-if="height[0]&gt;5">+\dfrac{<var>height[1]</var>}{<var>height[1]</var>}</span><span data-if="height[0]&gt;6">+\dfrac{<var>height[1]</var>}{<var>height[1]</var>}</span>+\dfrac{<var>height[0]</var>}{<var>height[1]</var>}</code><br /><br />&nbsp; &nbsp; &nbsp; &nbsp; <code>=
					<span data-if="height[0]==5">\dfrac{<var>height[1]</var>+<var>height[1]</var>+<var>height[1]</var>+<var>height[1]</var>+<var>height[1]</var>+<var>height[0]</var>}{<var>height[1]</var>}</span>
					<span data-if="height[0]==6">\dfrac{<var>height[1]</var>+<var>height[1]</var>+<var>height[1]</var>+<var>height[1]</var>+<var>height[1]</var>+<var>height[1]</var>+<var>height[0]</var>}{<var>height[1]</var>}</span>
					=\dfrac{<var>height[1]*height[0]+height[0]</var>}{<var>height[1]</var>}</code></p></div>
					<div><p>現在我們知道 <code><var>height[0]</var>\dfrac{<var>height[0]</var>}{<var>height[1]</var>} =\dfrac{<var>height[1]*height[0]+height[0]</var>}{<var>height[1]</var>}</code> ，我們把 <code>\dfrac{<var>height[1]*height[0]+height[0]</var>}{<var>height[1]</var>}</code> 乘以 <code>\dfrac{<var>frac_num[0]</var>}{<var>frac_num[1]</var>}</code> ，我們分別將分子與分子、分母與分母相乘：</p>
					<p><code>\dfrac{<var>height[1]*height[0]+height[0]</var>}{<var>height[1]</var>}\times\dfrac{<var>frac_num[0]</var>}{<var>frac_num[1]</var>}=\dfrac{<var>height[1]*height[0]+height[0]</var>\times<var>frac_num[0]</var>}{<var>height[1]</var>\times<var>frac_num[1]</var>}=\dfrac{<var>(height[1]*height[0]+height[0])*frac_num[0]</var>}{<var>frac_num[1]*height[1]</var>}</code></p>
					</div>
					<div><p>我們將結果進行約分，得到最簡分數：</p>
					<p><code>\dfrac{<var>(height[1]*height[0]+height[0])*frac_num[0]</var>}{<var>frac_num[1]*height[1]</var>}=\dfrac{<var>ggcd</var>\times<var>((height[1]*height[0]+height[0])*frac_num[0])/ggcd</var>}{<var>ggcd</var>\times<var>frac_num[1]*height[1]/ggcd</var>}=\dfrac{<var>((height[1]*height[0]+height[0])*frac_num[0])/ggcd</var>}{<var>frac_num[1]*height[1]/ggcd</var>}</code></p>
					</div>
					<p>通過 <code><var>((height[1]*height[0]+height[0])*frac_num[0])/ggcd</var></code> 除以 <code><var>frac_num[1]*height[1]/ggcd</var></code> 來把 <code>\dfrac{<var>((height[1]*height[0]+height[0])*frac_num[0])/ggcd</var>}{<var>frac_num[1]*height[1]/ggcd</var>}</code> 化成帶分數， <code>\dfrac{<var>frac_num[1]*height[1]/ggcd</var>}{<var>frac_num[1]*height[1]/ggcd</var>}</code> 看成是一公尺。 
					<code><var>((height[1]*height[0]+height[0])*frac_num[0])/ggcd</var></code> 除以 <code><var>frac_num[1]*height[1]/ggcd</var></code> ，商為 <code><var>frac_num[0]</var></code> ，餘數為 <code><var>frac_num[0]/getGCD(frac_num[0],height[1])</var></code> 。商為 <code><var>frac_num[0]</var></code> 就是 <code><var>frac_num[0]</var></code> 公尺，餘數為 <code><var>frac_num[0]/getGCD(frac_num[0],height[1])</var></code> 
					就是 <code><var>mixedFractionFromImproper(height[0]*frac_num[0],height[1]*frac_num[1],true,true,false,false)</var></code> 公尺。</p>
					<p>所以，<code>\dfrac{<var>frac_num[0]</var>}{<var>frac_num[1]</var>}</code> 條繩子長 <code class="hint_pink"><var>mixedFractionFromImproper(frac_num[0]*(height[1]+1),height[1],true,true,false,false)</var></code> 公尺。</p>
				</div>
			</div>
			
			<div id="case4">
				<div class="vars">
					<var id="book">randFromArray([[7,9],[8,9],[7,8]])</var>
					<var id="time_num">randRange(4,6)</var>
					<var id="name">randFromArray(["佐助","小櫻","新一","小蘭","喬治","約翰"])</var>
					<var id="ggcd">getGCD(time_num,book[1])</var>
				</div>
				<div class="question">
					<p><var>name</var>看歷史書，<var>name</var>每分鐘可以看 <code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 頁，<var>name</var>總共看了 <code><var>time_num</var></code> 分鐘。<var>name</var>總共看了多少頁書？</p>
					<div class="graphie" id="similar">
						init({ range: [ [ 0, 1 ], [ 0,  time_num ] ],scale: [ 450, 30 ] });
						var turn=time_num;
						for(var i=0;i&lt;time_num;i++){
							turn--;
							rectchart( [book[0], book[1]-book[0]], [ "#6495ED", "#ccc" ], turn );
						}
					</div>
				</div>
				<div class="solution" data-type="rational">
					<var>(book[0]*time_num/book[1])</var>
				</div>
				<div class="hints">
					<p><var>name</var>每分鐘能看 <code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 頁， <code><var>time_num</var></code> 分鐘看了 <code><var>time_num</var></code> 次這麼多的頁數，我們就可以用 <code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 乘以 <code><var>time_num</var></code> 得出<var>name</var>看書的頁數。</p>
					<p><code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}\times<var>time_num</var>= </code>？</p>
					<div><p>一個數字乘以 <code><var>time_num</var></code> 就等於把這個數字加 <code><var>time_num</var></code> 次：</p>
					<p><code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}\times<var>time_num</var>=\dfrac{<var>book[0]</var>}{<var>book[1]</var>}+\dfrac{<var>book[0]</var>}{<var>book[1]</var>}+\dfrac{<var>book[0]</var>}{<var>book[1]</var>}+\dfrac{<var>book[0]</var>}{<var>book[1]</var>}
					<span data-if="time_num&gt;4">+\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</span><span data-if="time_num&gt;5">+\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</span></code></p>
					</div>
					<div><p>我們可以將同分母的分子相加：</p>
					<p><code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}+\dfrac{<var>book[0]</var>}{<var>book[1]</var>}+\dfrac{<var>book[0]</var>}{<var>book[1]</var>}+\dfrac{<var>book[0]</var>}{<var>book[1]</var>}<span data-if="time_num&gt;4">+\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</span><span data-if="time_num&gt;5">+\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</span>
					=\dfrac{<var>book[0]</var>+<var>book[0]</var>+<var>book[0]</var>+<var>book[0]</var><span data-if="time_num&gt;4">+<var>book[0]</var></span><span data-if="time_num&gt;5">+<var>book[0]</var></span>}{<var>book[1]</var>}=\dfrac{<var>book[0]*time_num</var>}{<var>book[1]</var>}</code></p>
					<div data-if="ggcd!=1"><p>將結果進行約分，得到最簡分數：</p>
					<p><code>\dfrac{<var>book[0]*time_num</var>}{<var>book[1]</var>} = \dfrac{<var>book[0]*time_num/ggcd</var>}{<var>book[1]/ggcd</var>} </code></p></div>
					</div>
					<p>我們可以發現這個分數只是分子和次數相乘而分母不變： <code><var>book[0]</var>\times<var>time_num</var>=<var>book[0]*time_num</var></code> ， <code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}\times<var>time_num</var>=\dfrac{<var>book[0]*time_num</var>}{<var>book[1]</var>}</code> 
					<span data-if="ggcd!=1">，再化簡得到 <code>\dfrac{<var>book[0]*time_num/ggcd</var>}{<var>book[1]/ggcd</var>} </code></span> 。 <code>\dfrac{<var>book[0]*time_num/ggcd</var>}{<var>book[1]/ggcd</var>}</code> 是多少頁呢？
					</p>
					<p>通過 <code><var>(book[0]*time_num)/ggcd</var></code> 除以 <code><var>book[1]/ggcd</var></code> 來把 <code>\dfrac{<var>book[0]*time_num/ggcd</var>}{<var>book[1]/ggcd</var>}</code> 化成帶分數， <code>\dfrac{<var>book[1]/ggcd</var>}{<var>book[1]/ggcd</var>}</code> 看成一頁。 
					<code><var>(book[0]*time_num)/ggcd</var></code> 除以 <code><var>book[1]/ggcd</var></code> ，商為 <code><var>parseInt(book[0]*time_num/book[1])</var></code> ，餘數為 <code><var>(book[0]*time_num-parseInt(book[0]*time_num/book[1])*book[1])/ggcd</var></code> 。 
					商為 <code><var>parseInt(book[0]*time_num/book[1])</var></code> 就是 <code><var>parseInt(book[0]*time_num/book[1])</var></code> 頁，餘數為 <code><var>(book[0]*time_num-parseInt(book[0]*time_num/book[1])*book[1])/ggcd</var></code> 就是 <code>\dfrac{<var>(book[0]*time_num-parseInt(book[0]*time_num/book[1])*book[1])/ggcd</var>}{<var>book[1]/ggcd</var>}</code> 頁。</p>
					<p>所以<var>name</var>總共看了 <code class="hint_pink"><var>mixedFractionFromImproper(book[0]*time_num,book[1],true,true,false,false)</var></code> 頁。</p>
				</div>
			</div>
			
			<div id="case5">
				<div class="vars">
					<var id="book">randFromArray([[2,3],[3,4],[4,5]])</var>
					<var id="num">book[0]</var>
					<var id="name">randFromArray(["海倫","小櫻","吉娜","小蘭","喬治","約翰"])</var>					
					<var id="sum">
						(function(){
							var s = 0;
							for(var k = 0;k&lt;3;k++){
								if(k&gt;0){
									s+=1;
									$('#pic_'+(k+1)).val('true');
								}else{
									$('#pic_'+(k+1)).val('false');
								}
							}
							return s;
						})()
					</var>
				</div>
				<div class="question">
					<p><var>name</var>有 <code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 公升的洗衣精，星期五的時候<var>name</var>用了 <code>\dfrac{<var>num-1</var>}{<var>num</var>}</code> 的洗衣精來洗衣服。<var>name</var>還剩下多少洗衣精？</p>
					<table style="font-size:15px">
						<tr>
							<td><code>A.</code></td>
							<td><code>\dfrac{<var>book[0]*num-book[1]*1</var>}{<var>book[1]*num</var>}</code> 公升，因為：<br /><br /><code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}-\dfrac{1}{<var>num</var>}=\dfrac{<var>book[0]*num</var>}{<var>book[1]*num</var>}-\dfrac{<var>book[1]*1</var>}{<var>book[1]*num</var>}=\dfrac{<var>book[0]*num-book[1]*1</var>}{<var>book[1]*num</var>}</code></td>
						</tr>
						<tr>
							<td><code>B.</code></td>
							<td><code>\dfrac{1}{<var>book[1]</var>}</code> 公升，因為：<br /><br /><code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}\times \dfrac{1}{<var>num</var>}=\dfrac{<var>book[0]</var>\times 1}{<var>book[1]</var>\times{<var>num</var>}}=\dfrac{<var>book[0]*1</var>}{<var>book[1]*num</var>}=\dfrac{1}{<var>book[1]</var>}</code></td>
						</tr>
						<tr>
							<td><code>C.</code></td>
							<td><code>\dfrac{1}{<var>book[1]</var>}</code> 公升，因為：<br /><br /><code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}=\dfrac{1}{<var>book[1]</var>}+\dfrac{1}{<var>book[1]</var>}<span data-if="num&gt;2">+\dfrac{1}{<var>book[1]</var>}</span><span data-if="num&gt;3">+\dfrac{1}{<var>book[1]</var>}</span></code> ，
							所以剩下 <code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 的 <code>\dfrac{1}{<var>num</var>}</code> 就是 <code>\dfrac{1}{<var>book[1]</var>}</code>
							<div class="graphie" id="similar">
								init({
									range: [ [-0.1,3.1], [-0.1,book[1]+0.6] ],
									scale: 40
									});
								path([[0,0],[2,0],[2,book[0]],[0,book[0]],[0,0]], {stroke: "black",fill: "#ff7575"});
								path([[0,book[0]],[2,book[0]],[2,book[1]],[0,book[1]],[0,book[0]]], {stroke: "black",fill: "#fff"});
								label([2,book[0]/2], "\\frac{"+book[0]+"}{"+book[1]+"}"+"\\small{公升}", "right",{color:"#ff7575"});
							</div></td>
						</tr>
					</table>
					<p>請選擇所有正確的答案：</p>
					<table  style="font-size:15px">
						<tr>
							<td><input type="checkbox" id="pic_1" name="checkbox" /></td>
							<td style="width:450px"><div onclick="if($('#pic_1').attr('checked')){$('#pic_1').removeAttr('checked')}else{$('#pic_1').attr('checked','checked')}">
							<code>A</code></div></td>
						</tr>
						<tr>
							<td><input type="checkbox" id="pic_2" name="checkbox" /></td>
							<td style="width:450px"><div onclick="if($('#pic_2').attr('checked')){$('#pic_2').removeAttr('checked')}else{$('#pic_2').attr('checked','checked')}">
							<code>B</code></div></td>
						</tr>
						<tr>
							<td><input type="checkbox" id="pic_3" name="checkbox" /></td>
							<td style="width:450px"><div onclick="if($('#pic_3').attr('checked')){$('#pic_3').removeAttr('checked')}else{$('#pic_3').attr('checked','checked')}">
							<code>C</code></div></td>
						</tr>
					</table>
				</div>
				<div class="solution" data-type="multiple">
					<p>選擇所有正確的答案</p>
					<div class="sol" data-type="custom">
						<div class="guess">
							(function(){
								var chk_value =[];    
								$('input[name="checkbox"]:checked').each(function(){    
									chk_value.push($(this).val());    
								});
								return chk_value;
							})()
						</div>
						<div class="validator-function">
							if(guess.length==0){
								return "";
							}
							if(guess.length!=sum){
								return false;
							}
							var trueAns = 0;
							for(var i = 0;i&lt;guess.length;i++){
								if(guess[i]=='true'){
									trueAns++;
								}
							}
							if(trueAns==sum){
								return true;
							}					
						</div>
					</div>
				</div>
				<div class="hints">
					<p><var>name</var>有 <code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 公升的洗衣精，用了 <code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 公升洗衣精的 <code>\dfrac{<var>num-1</var>}{<var>num</var>}</code> ，那麼還剩下 <code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 的 <code>\dfrac{1}{<var>num</var>}</code> 。</p>
					<p><code>A</code> 選項中， <code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 減去 <code>\dfrac{1}{<var>num</var>}</code> ，如果<var>name</var>用了 <code>\dfrac{1}{<var>num</var>}</code> 公升的洗衣精來洗衣服，那麼我們可以用這個表達式求出答案。然而我們要求是還剩下 <code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 公升洗衣精的 <code>\dfrac{1}{<var>num</var>}</code> ， <code>A</code> 選項是錯誤的。</p>
					<div><p><code>B</code> 選項中， <code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 乘以 <code>\dfrac{1}{<var>num</var>}</code> ，我們知道 <code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 的 <code>\dfrac{1}{<var>num</var>}</code> 可以通過 <code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 乘以 <code>\dfrac{1}{<var>num</var>}</code> 得到結果，
					所以這個答案告訴我們如何求出 <code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 公升洗衣精的 <code>\dfrac{1}{<var>num</var>}</code> ， <code>B</code> 選項是正確的。</p>
					<div class="graphie" id="similar_2">
						init({
							range: [ [-0.1,3.1], [-0.1,book[1]+0.6] ],
							scale: 40
							});
						for(var i=0;i&lt;book[0];i++){
							if(i&lt;1){
								path([[0,i],[2,i],[2,i+1],[0,i+1],[0,0]], {stroke: "black",fill: "#ff7575"});
							}else{
								path([[0,i],[2,i],[2,i+1],[0,i+1],[0,0]], {stroke: "black",fill: "#ccc"});
							}
						}
						path([[0,book[0]],[2,book[0]],[2,book[1]],[0,book[1]],[0,book[0]]], {stroke: "black",fill: "#fff"});
						label([2,book[1]/2], "\\frac{"+(num-1)+"}{"+book[1]+"}"+"\\small{公升}", "right",{color:"#ccc"});
						label([2,0.5], "\\frac{1}{"+book[1]+"}"+"\\small{公升}", "right",{color:"#ff7575"});
					</div></div>
					<div><p><code>C</code> 選項中，表達式是將 <code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 公升洗衣精等分，還剩下 <code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 公升洗衣精的 <code>\dfrac{1}{<var>num</var>}</code> 就是還剩下 <code><var>num</var></code> 份中的 <code>1</code> 份，也就是 <code>\dfrac{1}{<var>book[1]</var>}</code> ，<code>C</code> 選項是正確的。</p>
					<div class="graphie" id="similar_3">
						init({
							range: [ [-0.1,3.1], [-0.1,book[1]+0.6] ],
							scale: 40
							});
						for(var i=0;i&lt;book[0];i++){
							path([[0,i],[2,i],[2,i+1],[0,i+1],[0,0]], {stroke: "black",fill: "#ff7575"});
							label([2,i+0.5], "\\frac{1}{"+book[1]+"}"+"\\small{公升}", "right",{color:"#ff7575"});
						}
						path([[0,book[0]],[2,book[0]],[2,book[1]],[0,book[1]],[0,book[0]]], {stroke: "black",fill: "#fff"});
					</div></div>
					<p>選項 <code class="hint_pink">B</code> 和 <code class="hint_pink">C</code> 是正確的。</p>
				</div>
			</div>
			
			<div id="case6">
				<div class="vars">
					<var id="del_den">randFromArray([5,7])</var>
					<var id="name1">randFromArray([["洗衣精"],["洗碗精"],["沐浴乳"]])</var>
					<var id="total">
						(function(){
							var num=new Array(4); 
							while(1){
								num[1]=randRange(4,6);
								num[0]=del_den*randRange(2,4);
								num[2]=parseInt(num[0]/num[1]);
								num[3]=num[0]-parseInt(num[0]/num[1])*num[1];
								if((getGCD(num[0],num[1])==1) && (del_den!=num[1])){
									return num;
								}
							}
						})()</var>
					<var id="del_num">
						(function(){
							var num=0;
							while(1){
								num=randRange(2,4);
								if((getGCD(num,del_den)==1) && (getGCD(total[0]*num/del_den,total[1])==1) && (parseInt(total[0]*num/del_den/total[1])&gt;0)){
									return num;
								}
							}
						})()</var>
					<var id="name">randFromArray(["小林","東來","佐助"])</var>
				</div>
				<div class="question">
					<p><var>name</var>總共有 <code><var>mixedFractionFromImproper(total[0],total[1],true,true,false,false)</var></code> 公升的<var>name1</var>，上個月用了 <code>\dfrac{<var>del_num</var>}{<var>del_den</var>}</code> 的<var>name1</var>。<var>name</var>上個月總共用了多少公升<var>name1</var>？</p>
				</div>
				<div class="solution" data-type="rational">
					<var>total[0]*del_num/total[1]/del_den</var>
				</div>
				<div class="hints">
					<div><p>讓我們假設這個長方形表示一公升的<var>name1</var>：</p>
					<div class="graphie">
                            init({ range: [ [ 0, 1 ], [ 0,  1 ] ],scale: [ 350, 30 ] });
                            rectchart( [0, 1], [ "#6495ED", "#ccc" ], 0 );
					</div></div>
					<div><p>我們可以將長方形平均分成 <code><var>total[1]</var></code> 個相等的小長方形，每一個小長方形表示 <code>\dfrac{1}{<var>total[1]</var>}</code> 公升。</p>
						<div class="graphie">
							init({ range: [ [ 0, 1 ], [ 0,  1 ] ],scale: [ 350, 30 ] });
							rectchart( [0, total[1]], [ "#6495ED", "#ccc" ], 0 );
					</div></div>
					<div><p>所以下面圖形表示 <code><var>mixedFractionFromImproper(total[0],total[1],true,true,false,false)</var></code> 公升。（每行表示一公升）</p>
					<div class="graphie">
                            init({ range: [ [ 0, 1 ], [ 0,  total[2]+1 ] ],scale: [ 350, 30 ] });
							var turn=total[2]+1;
							for(var i=0;i&lt;total[2];i++){
								turn--;
								rectchart( [total[1], 0 ], [ "#6495ED", "#ccc" ], turn );
							}
                            rectchart( [total[3],total[1]-total[3]], [ "#6495ED", "#fff" ], 0 );
					</div></div>
					<p>我們知道已經用了<var>name1</var>的 <code>\dfrac{<var>del_num</var>}{<var>del_den</var>}</code> ，也就是這些小長方形的 <code>\dfrac{<var>del_num</var>}{<var>del_den</var>}</code> 就是使用<var>name1</var>的量。那如何來求呢？</p>
					<div><p>我們要取出其中 <code>\dfrac{<var>del_num</var>}{<var>del_den</var>}</code> 的小長方形，可以將小長方形重新平均分成 <code><var>del_den</var></code> 組。總共有 <code><var>total[0]</var></code> 個小長方形，可以這樣排列：</p>
					<div class="graphie">
                            init({ range: [ [ 0, 1 ], [ 0,  del_den ] ],scale: [ (total[0]/del_den)*350/total[1], 30 ] });
							var turn=del_den;
							for(var i=0;i&lt;del_den;i++){
								turn--;
								rectchart( [total[0]/del_den, 0 ], [ "#6495ED", "#ccc" ], turn );
							}
					</div></div>
					<div><p>總共分成了 <code><var>del_den</var></code> 組，我們只要取其中的 <code>\dfrac{<var>del_num</var>}{<var>del_den</var>}</code> ：</p>
					<div class="graphie">
                            init({ range: [ [ 0, 1 ], [ 0,  del_den ] ],scale: [ (total[0]/del_den)*350/total[1], 30 ] });
							var turn=del_den;
							for(var i=0;i&lt;del_den;i++){
								turn--;
								if(i&lt;del_num){
									rectchart( [total[0]/del_den, 0 ], [ "#6495ED", "#ccc" ], turn );
								}else{
									rectchart( [total[0]/del_den, 0 ], [ "#ccc", "#ccc" ], turn );
								}
							}
					</div></div>
					<p>我們現在有 <code><var>total[0]*del_num/del_den</var></code> 個藍色小長方形，每個小長方形表示 <code>\dfrac{1}{<var>total[1]</var>}</code> 公升，所以 <code><var>total[0]*del_num/del_den</var></code> 個藍色小長方形就是 <code>\dfrac{<var>total[0]*del_num/del_den</var>}{<var>total[1]</var>}</code> 公升。</p>
					<p><code>\dfrac{<var>total[0]*del_num/del_den</var>}{<var>total[1]</var>}</code> 是多少公升的<var>name1</var>呢？</p>
					<div><p>我們可以重新排列藍色的小長方形，用帶分數表示：</p>
					<div class="graphie">
                            init({ range: [ [ 0, 1 ], [ 0,  parseInt(total[0]*del_num/del_den/total[1])+1 ] ],scale: [ 350, 30 ] });
							var turn=parseInt(total[0]*del_num/del_den/total[1])+1;
							for(var i=0;i&lt;parseInt(total[0]*del_num/del_den/total[1]);i++){
								turn--;
								rectchart( [total[1], 0 ], [ "#6495ED", "#ccc" ], turn );
							}
							rectchart( [total[0]*del_num/del_den-parseInt(total[0]*del_num/del_den/total[1])*total[1], total[1]-(total[0]*del_num/del_den-parseInt(total[0]*del_num/del_den/total[1])*total[1]) ], [ "#6495ED", "#fff" ], 0 );
					</div></div>
					<p>我們應該記得，一行 <code><var>total[1]</var></code> 個小長方形代表的是一公升，那如何用帶分數來表示呢？</p>
					<p>一行有 <code><var>total[1]</var></code> 個小長方形的總共有 <code><var>parseInt(total[0]*del_num/del_den/total[1])</var></code> 行，另外還有 <code><var>total[0]*del_num/del_den-parseInt(total[0]*del_num/del_den/total[1])*total[1]</var></code> 個小長方形，計算一下，  <code><var>total[0]*del_num/del_den</var></code> 除以  <code><var>total[1]</var></code> 
					商為 <code><var>parseInt(total[0]*del_num/del_den/total[1])</var></code> ，餘數為 <code><var>total[0]*del_num/del_den-parseInt(total[0]*del_num/del_den/total[1])*total[1]</var></code> ，因此 <code>\dfrac{<var>total[0]*del_num/del_den</var>}{<var>total[1]</var>}=<var>mixedFractionFromImproper(total[0]*del_num,total[1]*del_den,true,true,false,false)</var></code> 。</p>
					<p>所以，上個月總共用了 <code class="hint_pink"><var>mixedFractionFromImproper(total[0]*del_num,total[1]*del_den,true,true,false,false)</var></code> 公升<var>name1</var>。</p>
				</div>
			</div> 
			
			<div id="case7">
				<div class="vars">
					<var id="book">randFromArray([[2,5],[3,4],[4,5]])</var>
					<var id="data">randRange(3,5)</var>
					<var id="num">randRange(2,3)</var>
					<var id="ggcd">getGCD((book[1]*data+book[0])*num,book[1])</var>
					<var id="name">randFromArray(["海倫","小櫻","吉娜","小蘭","喬治","約翰"])</var>
					<var id="sum">
						(function(){
							var s = 0;
							for(var k = 0;k&lt;3;k++){
								if(k!=1){
									s+=1;
									$('#pic_'+(k+1)).val('true');
								}else{
									$('#pic_'+(k+1)).val('false');
								}
							}
							return s;
						})()
					</var>
				</div>
				<div class="question">
					<p><var>name</var>烘焙巧克力餅乾，食譜上寫做一個餅乾需要 <code><var>data</var>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 杯的麵粉，<var>name</var>準備做 <code><var>num</var></code> 個餅乾。<var>name</var>總共需要多少麵粉？</p>
					<table style="font-size:15px">
						<tr>
							<td><code>A.</code></td>
							<td><code>\dfrac{<var>(book[1]*data+book[0])*num/ggcd</var>}{<var>book[1]/ggcd</var>}</code> 杯，因為：<br /><br /><code><var>data</var>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}=\dfrac{<var>book[1]*data+book[0]</var>}{<var>book[1]</var>}\times <var>num</var>=\dfrac{<var>(book[1]*data+book[0])*num</var>}{<var>book[1]</var>}<span data-if="ggcd!=1">=\dfrac{<var>(book[1]*data+book[0])*num/ggcd</var>}{<var>book[1]/ggcd</var>}</span></code></td>
						</tr>
						<tr>
							<td><code>B.</code></td>
							<td><code>\dfrac{<var>(book[1]*data+book[0])</var>}{<var>book[1]</var>}</code> 杯，因為：<br /><br /><code><var>data</var>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}\times<var>num</var>=\dfrac{<var>book[1]*data+book[0]</var>}{<var>book[1]</var>}\times <var>num</var>=\dfrac{<var>(book[1]*data+book[0])*num</var>}{<var>book[1]*num</var>}=\dfrac{<var>(book[1]*data+book[0])</var>}{<var>book[1]</var>}</code></td>
						</tr>
						<tr>
							<td><code>C.</code></td>
							<td><code><var>mixedFractionFromImproper(book[0]*num+book[1]*data*num,book[1],true,true,false,false)</var></code> 杯，因為：<br /><br /><code><var>data</var>\times<var>num</var>=<var>data*num</var></code> ， <code>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}\times <var>num</var>=<var>mixedFractionFromImproper(book[0]*num,book[1],true,true,false,false)</var></code> ，<br /><br />因此 <code><var>data</var>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}\times<var>num</var>=<var>data*num</var>+<var>mixedFractionFromImproper(book[0]*num,book[1],true,true,false,false)</var>=<var>mixedFractionFromImproper(book[0]*num+book[1]*data*num,book[1],true,true,false,false)</var></code>
							<div class="graphie" id="similar">
								init({
									range: [ [-0.1,10.1], [-0.1,2*data+2+0.6] ],
									scale: 40
									});
								for(var j=0;j&lt;num;j++){
									for(var i=0;i&lt;data;i++){
										path([[j*3,2*i],[2+j*3,2*i],[2+j*3,2*(i+1)],[j*3,2*(i+1)],[j*3,2*i]], {stroke: "black",fill: "#28AE7B"});
										label([2.2+j*3,2*i+1], "\\small{1}", "right",{color:"#28AE7B"});
									}
									for(var i=0;i&lt;book[1];i++){
										if(i&lt;book[0]){
											path([[j*3,2*(i/book[1]+data)],[2+j*3,2*(i/book[1]+data)],[2+j*3,2*((i+1)/book[1]+data)],[j*3,2*((i+1)/book[1]+data)],[j*3,2*(i/book[1]+data)]], {stroke: "black",fill: "#28AE7B"});
											label([1.9+j*3,2*(i/book[1]+data)+1/book[1]], "\\small{1/"+book[1]+"}", "right",{color:"#28AE7B"});
										}else{
											path([[j*3,2*(i/book[1]+data)],[2+j*3,2*(i/book[1]+data)],[2+j*3,2*((i+1)/book[1]+data)],[j*3,2*((i+1)/book[1]+data)],[j*3,2*(i/book[1]+data)]], {stroke: "black",fill: "#fff"});
										}
									}
								}
							</div></td>
						</tr>
					</table>
					<p>請選擇所有正確的答案：</p>
					<table  style="font-size:15px">
						<tr>
							<td><input type="checkbox" id="pic_1" name="checkbox" /></td>
							<td style="width:450px"><div onclick="if($('#pic_1').attr('checked')){$('#pic_1').removeAttr('checked')}else{$('#pic_1').attr('checked','checked')}">
							<code>A</code></div></td>
						</tr>
						<tr>
							<td><input type="checkbox" id="pic_2" name="checkbox" /></td>
							<td style="width:450px"><div onclick="if($('#pic_2').attr('checked')){$('#pic_2').removeAttr('checked')}else{$('#pic_2').attr('checked','checked')}">
							<code>B</code></div></td>
						</tr>
						<tr>
							<td><input type="checkbox" id="pic_3" name="checkbox" /></td>
							<td style="width:450px"><div onclick="if($('#pic_3').attr('checked')){$('#pic_3').removeAttr('checked')}else{$('#pic_3').attr('checked','checked')}">
							<code>C</code></div></td>
						</tr>
					</table>
				</div>
				<div class="solution" data-type="multiple">
					<p>選擇所有正確的答案</p>
					<div class="sol" data-type="custom">
						<div class="guess">
							(function(){
								var chk_value =[];    
								$('input[name="checkbox"]:checked').each(function(){    
									chk_value.push($(this).val());    
								});
								return chk_value;
							})()
						</div>
						<div class="validator-function">
							if(guess.length==0){
								return "";
							}
							if(guess.length!=sum){
								return false;
							}
							var trueAns = 0;
							for(var i = 0;i&lt;guess.length;i++){
								if(guess[i]=='true'){
									trueAns++;
								}
							}
							if(trueAns==sum){
								return true;
							}					
						</div>
					</div>
				</div>
				<div class="hints">
					<p>食譜上做一個餅乾需要 <code><var>data</var>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 杯的麵粉，做 <code><var>num</var></code> 個餅乾就是用 <code><var>data</var>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 乘以 <code><var>num</var></code> 。哪個選項是 <code><var>data</var>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 乘以 <code><var>num</var></code> 的值呢？</p>
					<p><code>A</code> 選項中，先將 <code><var>data</var>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 轉換成假分數形式。</p>
					<p><code><var>data</var>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 就相當於 <code>\dfrac{<var>book[1]</var>}{<var>book[1]</var>}+\dfrac{<var>book[1]</var>}{<var>book[1]</var>}+\dfrac{<var>book[1]</var>}{<var>book[1]</var>}<span data-if="data&gt;3">+\dfrac{<var>book[1]</var>}{<var>book[1]</var>}</span><span data-if="data&gt;4">+\dfrac{<var>book[1]</var>}{<var>book[1]</var>}</span>+\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> ，我們可以化簡為：</p>
					<p><code>\dfrac{<var>book[1]</var>}{<var>book[1]</var>}+\dfrac{<var>book[1]</var>}{<var>book[1]</var>}+\dfrac{<var>book[1]</var>}{<var>book[1]</var>}<span data-if="data&gt;3">+\dfrac{<var>book[1]</var>}{<var>book[1]</var>}</span><span data-if="data&gt;4">+\dfrac{<var>book[1]</var>}{<var>book[1]</var>}</span>+\dfrac{<var>book[0]</var>}{<var>book[1]</var>}=\dfrac{<var>book[1]</var>+<var>book[1]</var>+<var>book[1]</var><span data-if="data&gt;3">+<var>book[1]</var></span><span data-if="data&gt;4">+<var>book[1]</var></span>+<var>book[0]</var>}{<var>book[1]</var>}=\dfrac{<var>book[1]*data+book[0]</var>}{<var>book[1]</var>}</code></p>
					<p><code>A</code> 選項中，化成假分數是正確的。然後 <code>\dfrac{<var>book[1]*data+book[0]</var>}{<var>book[1]</var>}\times <var>num</var>=\dfrac{<var>book[1]*data+book[0]</var>}{<var>book[1]</var>}+\dfrac{<var>book[1]*data+book[0]</var>}{<var>book[1]</var>}<span data-if="num&gt;2">+\dfrac{<var>book[1]*data+book[0]</var>}{<var>book[1]</var>}</span>=\dfrac{<var>(book[1]*data+book[0])*num</var>}{<var>book[1]</var>}</code> ，這一步也是正確的。<span data-if="ggcd!=1">最後將分數化簡成最簡分數形式，</span>所以 <code>A</code> 選項是正確的。</p>
					<p><code>B</code> 選項中，將 <code><var>data</var>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 轉換成假分數是正確的，再乘以 <code><var>num</var></code> 時只要分子乘以 <code><var>num</var></code> 就可以了，所以 <code>B</code> 選項是錯誤的。</p>
					<p><code>C</code> 選項中，我們將帶分數 <code><var>data</var>\dfrac{<var>book[0]</var>}{<var>book[1]</var>}</code> 分成一個整數和一個真分數，再分別乘以 <code><var>num</var></code> ，最後將整數與分數相加的值就是最終的值，答案是正確的，所以 <code>C</code> 選項是正確的。</p>
					<p>選項 <code class="hint_pink">A</code> 和 <code class="hint_pink">C</code> 是正確的。</p>
				</div>
			</div>
			
			<div id="case8">
				<div class="vars">
					<var id="data">randRange(3,6)</var>
					<var id="total">data*3</var>
					<var id="den">randRange(1,2)</var>
					<var id="right">["錯誤","正確"]</var>
				</div>
				<div class="question">
					<p>一對雙胞胎兄弟和他們的弟弟平分 <code><var>total</var></code> 磅的糖果，雙胞胎兄弟可以分到多少磅糖果呢？這個問題可以用 <code><var>total</var></code> 乘以 <code>\dfrac{<var>den</var>}{3}</code> 得到的答案是正確的嗎？</p>
					<div class="graphie" id="similar">
						init({
							range: [ [-0.1,5.1], [-0.1,6+0.1] ],
							scale: 40
							});
						for(var i=0;i&lt;3;i++){
							path([[0,2*i],[3,2*i],[3,2*(i+1)],[0,2*(i+1)],[0,2*i]], {stroke: "black",fill: "#28AE7B"});
						}
						label([1.5,0.5], "\\small{弟弟}", "above",{color:"black"});
						label([1.5,2.5], "\\small{雙胞胎B}", "above",{color:"black"});
						label([1.5,4.5], "\\small{雙胞胎A}", "above",{color:"black"});
						path([[3.1,0],[3.3,0.2],[3.3,2.8],[3.5,3],[3.3,3.2],[3.3,5.8],[3.1,6]], {stroke: "black"});
						label([3.5,3], "\\small{"+total+"磅}", "right",{color:"black"});
					</div>
				</div>
				<div class="solution"><var>right[den-1]</var></div>
				<ul class="choices" data-category="true">
					<li>正確</li>
					<li>錯誤</li>
				</ul>
				<div class="hints">
					<p>我們想知道雙胞胎兄弟分到了多少磅糖果。首先我們先確定雙胞胎兄弟人數是所有兄弟們的幾分之幾？</p>
					<p>雙胞胎兄弟是 <code>3</code> 兄弟中的 <code>2</code> 個人，也就是說是所有兄弟人數的 <code>\dfrac{2}{3}</code> 。</p>
					<p>兄弟們平分 <code><var>total</var></code> 磅的糖果，所以 <code>\dfrac{2}{3}</code> 的人數應該分到 <code>\dfrac{2}{3}</code> 的糖果，因此雙胞胎兄弟應該分到 <code><var>total</var></code> 磅糖果中的 <code>\dfrac{2}{3}</code> 。</p>
					<p>我們可以用 <code><var>total</var></code> 乘以 <code>\dfrac{2}{3}</code> 求出 <code><var>total</var></code> 的 <code>\dfrac{2}{3}</code> 。所以 <code><var>total</var></code> 乘以  <code>\dfrac{<var>den</var>}{3}</code>  得到答案是
					<span data-if="den==1" class="hint_pink">錯誤</span><span data-if="den==2" class="hint_pink">正確</span>的。</p>
				</div>
			</div>
			
			<div id="case9">
				<div class="vars">
					<var id="data_num">randRange(2,3)</var>
					<var id="data_den">1</var>
					<var id="total">randFromArray([[1,3],[2,3],[1,4],[1,5],[2,5],[3,5]])</var>
				</div>
				<div class="question">
					<p>陳老師的班上有 <code>\dfrac{1}{<var>data_num</var>}</code> 的學生養小狗，當中有 <code>\dfrac{<var>total[0]</var>}{<var>total[1]</var>}</code> 的學生養的是比格犬。請問陳老師班上養比格犬的學生是總人數的幾分之幾？</p>
					<div class="graphie" id="similar">
						init({
							range: [ [-2.1,9.1], [-0.1,1.1] ],
							scale: 40
							});
						var j=9/data_num;
						for(var i=0;i&lt;data_num;i++){
							if(i&lt;1){
								for(var k=0;k&lt;total[1];k++){
									var n=j/total[1];
									if(k&lt;total[0]){
										path([[k*n,0],[k*n+n,0],[n+k*n,1],[k*n,1],[k*n,0]], {stroke: "black",fill: "#B15BFF"});
									}else{
										path([[k*n,0],[k*n+n,0],[n+k*n,1],[k*n,1],[k*n,0]], {stroke: "black",fill: "#FF44FF"});
									}
								}
							}else{
								path([[j*i,0],[j+j*i,0],[j+j*i,1],[j*i,1],[j*i,0]], {stroke: "black",fill: "#ccc"});
							}
						}
					</div>
				</div>
				<div class="solution" data-type="rational">
					<var>total[0]/total[1]/data_num</var>
				</div>
				<div class="hints">
					<div><p>我們假設這個長方形代表全班的總人數：</p>
					<div class="graphie" id="similar">
						init({
							range: [ [-2.1,9.1], [-0.1,1.1] ],
							scale: 40
							});
						path([[0,0],[9,0],[9,1],[0,1],[0,0]], {stroke: "#6495ED",fill: "#fff"});
						label([4.5,0], "\\small{陳老師的學生}", "above",{color:"black"});
					</div></div>
					<div><p>因為班上有 <code>\dfrac{1}{<var>data_num</var>}</code> 的學生養小狗，所以我們要將長方形平均分成 <code><var>data_num</var></code> 個小長方形，每個小長方形代表學生總人數的 <code>\dfrac{1}{<var>data_num</var>}</code> 。</p>
					<div class="graphie" id="similar_2">
						init({
							range: [ [-2.1,9.1], [-1.1,2.1] ],
							scale: 40
							});
						path([[0,1.1],[0.2,1.2],[4.4,1.2],[4.5,1.4],[4.6,1.2],[8.9,1.2],[9,1.1]], {stroke: "#6495ED"});
						path([[0,0],[9,0],[9,1],[0,1],[0,0]], {stroke: "#6495ED",fill: "#fff"});
						label([4.5,1.2], "\\small{陳老師的學生}", "above",{color:"black"});
						var j=9/data_num;
						for(var i=0;i&lt;data_num;i++){
							line([j*i,0],[j*i,1], {stroke: "#6495ED"});
							label([j*i+j/2,0], "\\frac{1}{"+data_num+"}"+"\\small{學生}", "above",{color:"black"});
						}
						path([[0,-0.1],[0.2,-0.2],[j/2-0.1,-0.2],[j/2,-0.4],[j/2+0.1,-0.2],[j-0.2,-0.2],[j,-0.1]], {stroke: "#6495ED"});
						label([j/2,-0.2], "\\frac{1}{"+data_num+"}"+"\\small{學生}", "below",{color:"black"});
					</div></div>
					<p>養狗的學生中有 <code>\dfrac{<var>total[0]</var>}{<var>total[1]</var>}</code> 養的是比格犬，我們求出養狗學生中的 <code>\dfrac{<var>total[0]</var>}{<var>total[1]</var>}</code> ，就是養比格犬的人數在總人數中的幾分之幾。</p>
					<div><p>要得到 <code>\dfrac{<var>total[0]</var>}{<var>total[1]</var>}</code> ，我們需要將長方形平均分成 <code><var>total[1]*data_num</var></code> 個小長方形：</p>
					<div class="graphie" id="similar_3">
						init({
							range: [ [-2.1,9.1], [-1.1,2.1] ],
							scale: 40
							});
						
						path([[0,0],[9,0],[9,1],[0,1],[0,0]], {stroke: "#6495ED",fill: "#fff"});
						
						var j=9/data_num/total[1];
						for(var i=0;i&lt;data_num*total[1];i++){
							line([j*i,0],[j*i,1], {stroke: "#6495ED"});
							label([j*i+j/2,0], "\\frac{1}{"+data_num*total[1]+"}", "above",{color:"black"});
						}
						j=j*total[1];
						path([[0,1.1],[0.2,1.2],[j/2-0.1,1.2],[j/2,1.4],[j/2+0.1,1.2],[j-0.2,1.2],[j,1.1]], {stroke: "#6495ED"});
						label([j/2,1.2], "\\frac{1}{"+data_num+"}"+"\\small{學生}", "above",{color:"black"});
					</div></div>
					<div><p>我們可以得到 <code>\dfrac{1}{<var>data_num</var>}</code> 的 <code>\dfrac{<var>total[0]</var>}{<var>total[1]</var>}</code> ，如下：</p>
					<div class="graphie" id="similar_4">
						init({
							range: [ [-2.1,9.1], [-1.1,2.1] ],
							scale: 40
							});
						
						path([[0,0],[9,0],[9,1],[0,1],[0,0]], {stroke: "#6495ED",fill: "#fff"});
						
						var j=9/data_num/total[1];
						for(var i=0;i&lt;data_num*total[1];i++){
							line([j*i,0],[j*i,1], {stroke: "#6495ED"});
							label([j*i+j/2,0], "\\frac{1}{"+data_num*total[1]+"}", "above",{color:"black"});
						}
						var l=j*total[0];
						path([[0,-0.1],[0.2,-0.2],[l/2-0.1,-0.2],[l/2,-0.4],[l/2+0.1,-0.2],[l-0.2,-0.2],[l,-0.1]], {stroke: "#6495ED"});
						label([l/2,-0.2], "\\frac{1}{"+data_num+"}"+"\\small{的}"+"\\frac{"+total[0]+"}{"+total[1]+"}", "below",{color:"black"});
						var k=j*total[1];
						path([[0,1.1],[0.2,1.2],[k/2-0.1,1.2],[k/2,1.4],[k/2+0.1,1.2],[k-0.2,1.2],[k,1.1]], {stroke: "#6495ED"});
						label([k/2,1.2], "\\frac{1}{"+data_num+"}"+"\\small{學生}", "above",{color:"black"});
					</div></div>
					<p>我們可以得出 <code>\dfrac{1}{<var>data_num</var>}</code> 的 <code>\dfrac{<var>total[0]</var>}{<var>total[1]</var>}</code> 就相當於所有小長方形的 <code>\dfrac{<var>total[0]</var>}{<var>total[1]*data_num</var>}</code> <span data-if="getGCD(total[0],total[1]*data_num)!=1">，化簡得 <code><var>mixedFractionFromImproper(total[0],total[1]*data_num,true,true,false,false)</var></code> </span>。</p>
					<p>所以，陳老師班上 <code class="hint_pink"><var>mixedFractionFromImproper(total[0],total[1]*data_num,true,true,false,false)</var></code> 的學生養比格犬。</p>
				</div>
			</div>
		
			<div id="case10">
				<div class="vars">
					<var id="total">randFromArray([[10,3],[9,4],[8,3]])</var>
					<var id="len">
						(function(){
							var num=0;
							switch(total[0]){
								case 10:num=5;break;
								case 9:num=3;break;
								case 8:num=4;break;
							}
							return num;
						})()</var>
					<var id="ggcd">getGCD(total[0],total[1]*len)</var>
					<var id="name">randFromArray(["小林","東來","小王"])</var>
				</div>
				<div class="question">
					<p><var>name</var>騎車每分鐘能騎 <code>\dfrac{1}{<var>len</var>}</code> 公里，<var>name</var>到朋友家需要用 <code><var>mixedFractionFromImproper(total[0],total[1],true,true,false,false)</var></code> 分鐘。請問<var>name</var>與朋友家相距多少公里？</p>
				</div>
				<div class="solution" data-type="rational">
					<var>total[0]/total[1]/len</var>
				</div>
				<div class="hints">
					<div><p>讓我们假設这個長方形表示一公里：</p>
						<div class="graphie">
                            init({ range: [ [ 0, 1 ], [ 0,  1 ] ],scale: [ 350, 30 ] });
                            rectchart( [0, 1], [ "#6495ED", "#ccc" ], 0 );
					</div></div>
					<div><p>我們可以將長方形平均分成 <code><var>len</var></code> 個相等的小長方形，每一個小長方形表示 <code>\dfrac{1}{<var>len</var>}</code> 公里。因此，一個藍色小長方形代表 <code>\dfrac{1}{<var>len</var>}</code> 公里。</p>
						<div class="graphie">
							init({ range: [ [ 0, 1 ], [ 0,  1 ] ],scale: [ 350, 30 ] });
							rectchart( [1, len-1], [ "#6495ED", "#ccc" ], 0 );
					</div></div>
					<p>每分鐘能騎 <code>\dfrac{1}{<var>len</var>}</code> 公里，去朋友家需要用 <code><var>mixedFractionFromImproper(total[0],total[1],true,true,false,false)</var></code> 分鐘，也就是騎 <code><var>mixedFractionFromImproper(total[0],total[1],true,true,false,false)</var></code> 倍的距離，我們可以用
					<code>\dfrac{1}{<var>len</var>}</code> 乘以 <code><var>mixedFractionFromImproper(total[0],total[1],true,true,false,false)</var></code> 來求出<var>name</var>與朋友家相距多少公里。</p>
					<div><p>我們可以將每個小長方形平均分成 <code><var>total[1]</var></code> 份，每一個小長方形就表示 <code>\dfrac{1}{<var>len</var>}</code> 的 <code>\dfrac{1}{<var>total[1]</var>}</code> ：</p>
						<div class="graphie">
							init({ range: [ [ 0, 1 ], [ 0,  1 ] ],scale: [ 350, 30 ] });
							rectchart( [total[1], (len-1)*total[1]], [ "#6495ED", "#ccc" ], 0 );
					</div></div>
					<div><p>然後， <code><var>mixedFractionFromImproper(total[0],total[1],true,true,false,false)</var></code> 倍的藍色部分如下所示：</p>
						<div class="graphie">
                            init({ range: [ [ 0, 1 ], [ 0, parseInt(total[0]/total[1])+1] ],scale: [ 350, 30 ] });
							var turn=parseInt(total[0]/total[1])+1;
							for(var i=0;i&lt;parseInt(total[0]/total[1]);i++){
								turn--;
								rectchart( [total[1], (len-1)*total[1]] , [ "#6495ED", "#fff" ], turn );
							}
                            rectchart( [total[0]-parseInt(total[0]/total[1])*total[1],len*total[1]-total[0]+parseInt(total[0]/total[1])*total[1]], [ "#6495ED", "#fff" ], 0 );
					</div></div>
					<div><p>現在有 <code><var>total[0]</var></code> 個藍色的小長方形，將它們重新排列，如下：</p>
					<div class="graphie">
                           init({ range: [ [ 0, 1 ], [ 0, 1] ],scale: [ 350, 30 ] });
                            rectchart( [total[0],len*total[1]-total[0]], [ "#6495ED", "#ccc" ], 0 );
					</div></div>
					<p>怎麼用分數來表示呢？</p>
					<div><p><code><var>total[1]*len</var></code> 個中有 <code><var>total[0]</var></code> 個是藍色的小長方形，因此<var>name</var>與朋友家相距 <code>\dfrac{<var>total[0]</var>}{<var>total[1]*len</var>}</code> 公里，因為 <code>\dfrac{<var>total[0]</var>}{<var>total[1]*len</var>}=\dfrac{<var>total[0]/ggcd</var>}{<var>total[1]*len/ggcd</var>}</code>，所以<var>name</var>與朋友家相距 <code class="hint_pink">\dfrac{<var>total[0]/ggcd</var>}{<var>total[1]*len/ggcd</var>}</code> 公里。</p>
					<div class="graphie">
                           init({ range: [ [ 0, 1 ], [ 0, 2] ],scale: [ 350, 30 ] });
                            rectchart( [total[0],len*total[1]-total[0]], [ "#6495ED", "#ccc" ], 1 );
							rectchart( [total[0]/ggcd,len*total[1]/ggcd-total[0]/ggcd], [ "#6495ED", "#ccc" ], 0 );
					</div></div>
				</div>
			</div> 
		</div>
    </div>
</body>
</html>
