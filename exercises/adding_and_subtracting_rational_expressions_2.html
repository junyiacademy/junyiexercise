<!DOCTYPE html>
<html data-require="math math-format expressions rational-expressions">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>有理式的加減 2</title>
    <script src="../khan-exercise.js"></script>
	<script type="text/javascript">
		function checkArr(str1,str2){
			if(str1!=str2){
				return false;
			}
			return true;
		}
		function reverseStr(str){
			if(str.charAt(0)=='-'){
				return str.substr(1,str.length);
			}else return '-'+str;
		}
		function checkReverse(str1,str2){
			if(reverseStr(str1)!=str2){
				return false;
			}
			return true;
		}
	</script>
</head>
<body>
    <div class="exercise">
        <div class="vars">
            <var id="SIGN">randFromArray(["+", "-"])</var>
            <var id="X">randVar()</var>
            <var id="Y" data-ensure="X !== Y">randVar()</var>
            <div data-ensure="getGCD(NUMERATOR1, DENOMINATOR1) === 1">
                <var id="NUMERATOR1">randRangeWeighted(1, 10, 1, 0.4)</var>
                <var id="DENOMINATOR1">randRange(2, 10)</var>
            </div>
            <var id="DENOMINATOR2" data-ensure="DENOMINATOR1 !== DENOMINATOR2">randRange(2, 10)</var>
            <var id="NUMERATOR2" data-ensure="getGCD(NUMERATOR2, DENOMINATOR2) === 1">randRangeWeighted(1, 10, 1, 0.4)</var>
            <var id="DENOMINATORCOEFF">getLCM(DENOMINATOR1, DENOMINATOR2)</var>
            <var id="F1">DENOMINATORCOEFF / DENOMINATOR1</var>
            <var id="F2">DENOMINATORCOEFF / DENOMINATOR2</var>
            <var id="NUMERATORCOEFF">SIGN === "+" ? NUMERATOR1 * F1 + NUMERATOR2 * F2 : NUMERATOR1 * F1 - NUMERATOR2 * F2</var>
            <var id="FACTOR">getGCD(NUMERATORCOEFF, DENOMINATORCOEFF)</var>
        </div>

        <div class="problems">
            <div id="variable-top">
                <div class="vars">
                    <var id="N1">new Term(NUMERATOR1, X)</var>
                    <var id="N2">new Term(NUMERATOR2, X)</var>
                    <var id="D1">new Term(DENOMINATOR1)</var>
                    <var id="D2">new Term(DENOMINATOR2)</var>
                    <var id="NUMERATOR">new Term(NUMERATORCOEFF, X)</var>
                    <var id="DENOMINATOR">new Term(DENOMINATORCOEFF)</var>
                    <var id="NUMERSOL">NUMERATOR.divide(FACTOR)</var>
                    <var id="DENOMSOL">DENOMINATOR.divide(FACTOR)</var>
                </div>
            </div>

            <div id="variable-bottom">
                <div class="vars">
                    <var id="N1">new Term(NUMERATOR1)</var>
                    <var id="N2">new Term(NUMERATOR2)</var>
                    <var id="D1">new Term(DENOMINATOR1, X)</var>
                    <var id="D2">new Term(DENOMINATOR2, X)</var>
                    <var id="NUMERATOR">new Term(NUMERATORCOEFF)</var>
                    <var id="DENOMINATOR">new Term(DENOMINATORCOEFF, X)</var>
                    <var id="NUMERSOL">NUMERATOR.divide(FACTOR)</var>
                    <var id="DENOMSOL">DENOMINATOR.divide(FACTOR)</var>
                </div>
            </div>
        </div>

        <p class="problem">化簡並展開下式 <code>:</code></p>
        <p class="question">
            <code><var>Y</var> = \dfrac{<var>N1</var>}{<var>D1</var>}
                  <var>SIGN</var> \dfrac{<var>N2</var>}{<var>D2</var>}</code>
        </p>

        <div class="solution" data-type="multiple">
			<table>
				<tr><td style="border-bottom:1px solid black"><input type="text" style="width:100px;text-align:center;" id="a1"></td></tr>
				<tr><td style="border-top:1px solid black"><input type="text" style="width:100px;text-align:center" id="a2"></td></tr>
			</table>
			<div class="sol" data-type="custom">
				<div class="guess">[$('#a1').val().toString().replace(/[ ]/g,"").replace(/−/g,'-'),$('#a2').val().toString().replace(/[ ]/g,"").replace(/−/g,'-'),FACTOR !== 1?NUMERSOL.toString().replace(/[ ]/g,"").replace(/−/g,'-'):NUMERATOR.toString().replace(/[ ]/g,"").replace(/−/g,'-'),FACTOR !== 1?DENOMSOL.toString().replace(/[ ]/g,"").replace(/−/g,'-'):DENOMINATOR.toString().replace(/[ ]/g,"").replace(/−/g,'-')]</div>
				<div class="validator-function">
					if(guess[0]==""||guess[1]==""){
						return "";
					}
					return (checkArr(guess[0],guess[2])&&checkArr(guess[1],guess[3]))||(checkReverse(guess[0],guess[2])&&checkReverse(guess[1],guess[3]));
				</div>
			</div>
			<p class="example">分別填入分子與分母</p>
			<p class="example">分子與分母的式子要最簡</p>
			<p class="example"><code>x*3</code> 要寫成 <code>3x</code></p>
			<p class="example"><code>y^{2}</code> 寫成 <code>y</code>^<code>2</code></p>
        </div>

        <div class="hints">
            <p>為了使式子 <span data-if="SIGN === '+'">相加</span><span data-else="">相減</span> ，它們必須有一個公分母。</p>
            <p>最小公分母是 <code><var>D1</var></code> 和 <code><var>D2</var></code> 的最小公倍數。</p>
            <p><code>\lcm(<var>D1</var>, <var>D2</var>) = <var>DENOMINATOR</var></code></p>
            <p><code>
                <var>Y</var> = \dfrac{<var>F1</var>}{<var>F1</var>} \cdot \dfrac{<var>N1</var>}{<var>D1</var>}
                <var>SIGN</var> \dfrac{<var>F2</var>}{<var>F2</var>} \cdot \dfrac{<var>N2</var>}{<var>D2</var>}
            </code></p>
            <p>
                <code><var>Y</var> = \dfrac{<var>N1.multiply(F1)</var>}{<var>DENOMINATOR</var>}
                     <var>SIGN</var> \dfrac{<var>N2.multiply(F2)</var>}{<var>DENOMINATOR</var>}</code>
            </p>
            <p>
                <code><var>Y</var> = \dfrac{<var>N1.multiply(F1)</var>
                    <var>SIGN</var><var>N2.multiply(F2)</var>}{<var>DENOMINATOR</var>}</code>
            </p>
            <p><code><var>Y</var> = \dfrac{<var>NUMERATOR</var>}{<var>DENOMINATOR</var>}</code></p>
            <div data-if="FACTOR !== 1">
                <div>將分子和分母同時除以 <code><var>FACTOR</var></code> ，化簡得 <code>:</code></div>
                <div><code><var>Y</var> = \dfrac{<var>NUMERSOL</var>}{<var>DENOMSOL</var>}</code></div>
            </div>
        </div>
    </div>
</body>
</html>
